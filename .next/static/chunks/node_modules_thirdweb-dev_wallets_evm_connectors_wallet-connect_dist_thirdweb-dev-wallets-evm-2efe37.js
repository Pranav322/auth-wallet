"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["node_modules_thirdweb-dev_wallets_evm_connectors_wallet-connect_dist_thirdweb-dev-wallets-evm-2efe37"],{

/***/ "./node_modules/@thirdweb-dev/wallets/dist/url-bc88b2b6.browser.esm.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@thirdweb-dev/wallets/dist/url-bc88b2b6.browser.esm.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   g: function() { return /* binding */ getValidPublicRPCUrl; },\n/* harmony export */   i: function() { return /* binding */ isTwUrl; }\n/* harmony export */ });\n/* harmony import */ var _thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @thirdweb-dev/chains */ \"./node_modules/@thirdweb-dev/chains/dist/thirdweb-dev-chains.esm.js\");\n\n\nfunction isTwUrl(url) {\n  const host = new URL(url).hostname;\n  return host.endsWith(\".thirdweb.com\") || host === \"localhost\" || host === \"0.0.0.0\";\n}\nfunction getValidPublicRPCUrl(chain) {\n  return (0,_thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_0__.getValidChainRPCs)(chain).map(rpc => {\n    try {\n      const url = new URL(rpc);\n      // remove client id from url\n      if (url.hostname.endsWith(\".thirdweb.com\")) {\n        url.pathname = \"\";\n        url.search = \"\";\n      }\n      return url.toString();\n    } catch (e) {\n      return rpc;\n    }\n  });\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHRoaXJkd2ViLWRldi93YWxsZXRzL2Rpc3QvdXJsLWJjODhiMmI2LmJyb3dzZXIuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5RDs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUVBQWlCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFbUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0B0aGlyZHdlYi1kZXYvd2FsbGV0cy9kaXN0L3VybC1iYzg4YjJiNi5icm93c2VyLmVzbS5qcz85YmQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFZhbGlkQ2hhaW5SUENzIH0gZnJvbSAnQHRoaXJkd2ViLWRldi9jaGFpbnMnO1xuXG5mdW5jdGlvbiBpc1R3VXJsKHVybCkge1xuICBjb25zdCBob3N0ID0gbmV3IFVSTCh1cmwpLmhvc3RuYW1lO1xuICByZXR1cm4gaG9zdC5lbmRzV2l0aChcIi50aGlyZHdlYi5jb21cIikgfHwgaG9zdCA9PT0gXCJsb2NhbGhvc3RcIiB8fCBob3N0ID09PSBcIjAuMC4wLjBcIjtcbn1cbmZ1bmN0aW9uIGdldFZhbGlkUHVibGljUlBDVXJsKGNoYWluKSB7XG4gIHJldHVybiBnZXRWYWxpZENoYWluUlBDcyhjaGFpbikubWFwKHJwYyA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocnBjKTtcbiAgICAgIC8vIHJlbW92ZSBjbGllbnQgaWQgZnJvbSB1cmxcbiAgICAgIGlmICh1cmwuaG9zdG5hbWUuZW5kc1dpdGgoXCIudGhpcmR3ZWIuY29tXCIpKSB7XG4gICAgICAgIHVybC5wYXRobmFtZSA9IFwiXCI7XG4gICAgICAgIHVybC5zZWFyY2ggPSBcIlwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBycGM7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IHsgZ2V0VmFsaWRQdWJsaWNSUENVcmwgYXMgZywgaXNUd1VybCBhcyBpIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@thirdweb-dev/wallets/dist/url-bc88b2b6.browser.esm.js\n"));

/***/ }),

/***/ "./node_modules/@thirdweb-dev/wallets/evm/connectors/wallet-connect/dist/thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm.js":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/@thirdweb-dev/wallets/evm/connectors/wallet-connect/dist/thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm.js ***!
  \*************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WalletConnectConnector: function() { return /* binding */ WalletConnectConnector; }\n/* harmony export */ });\n/* harmony import */ var _dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../dist/classPrivateMethodGet-ea199cc3.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/classPrivateMethodGet-ea199cc3.browser.esm.js\");\n/* harmony import */ var _dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../dist/classPrivateFieldSet-a5db7c83.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/classPrivateFieldSet-a5db7c83.browser.esm.js\");\n/* harmony import */ var _dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../dist/defineProperty-c8ecdc07.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/defineProperty-c8ecdc07.browser.esm.js\");\n/* harmony import */ var _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../dist/errors-ec4e53e9.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/errors-ec4e53e9.browser.esm.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ethers */ \"./node_modules/ethers/lib.esm/index.js\");\n/* harmony import */ var _dist_walletIds_afeb5af2_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../dist/walletIds-afeb5af2.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/walletIds-afeb5af2.browser.esm.js\");\n/* harmony import */ var _dist_url_bc88b2b6_browser_esm_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../dist/url-bc88b2b6.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/url-bc88b2b6.browser.esm.js\");\n/* harmony import */ var _dist_WagmiConnector_2f14002d_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../dist/WagmiConnector-2f14002d.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/WagmiConnector-2f14002d.browser.esm.js\");\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! eventemitter3 */ \"./node_modules/@thirdweb-dev/wallets/node_modules/eventemitter3/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\nconst chainsToRequest = new Set([1, 137, 10, 42161, 56]);\nconst NAMESPACE = \"eip155\";\nconst REQUESTED_CHAINS_KEY = \"wagmi.requestedChains\";\nconst ADD_ETH_CHAIN_METHOD = \"wallet_addEthereumChain\";\nconst LAST_USED_CHAIN_ID = \"last-used-chain-id\";\nvar _provider = /*#__PURE__*/new WeakMap();\nvar _initProviderPromise = /*#__PURE__*/new WeakMap();\nvar _storage = /*#__PURE__*/new WeakMap();\nvar _createProvider = /*#__PURE__*/new WeakSet();\nvar _isChainsStale = /*#__PURE__*/new WeakSet();\nvar _removeListeners = /*#__PURE__*/new WeakSet();\nvar _setRequestedChainsIds = /*#__PURE__*/new WeakSet();\nvar _getRequestedChainsIds = /*#__PURE__*/new WeakSet();\nvar _getNamespaceChainsIds = /*#__PURE__*/new WeakSet();\nvar _getNamespaceMethods = /*#__PURE__*/new WeakSet();\nclass WalletConnectConnector extends _dist_WagmiConnector_2f14002d_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.W {\n  constructor(config) {\n    super({\n      ...config,\n      options: {\n        isNewChainsStale: true,\n        ...config.options\n      }\n    });\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _getNamespaceMethods);\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _getNamespaceChainsIds);\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _getRequestedChainsIds);\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _setRequestedChainsIds);\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _removeListeners);\n    /**\n     * Checks if the target chains match the chains that were\n     * initially requested by the connector for the WalletConnect session.\n     * If there is a mismatch, this means that the chains on the connector\n     * are considered stale, and need to be revalidated at a later point (via\n     * connection).\n     *\n     * There may be a scenario where a dapp adds a chain to the\n     * connector later on, however, this chain will not have been approved or rejected\n     * by the wallet. In this case, the chain is considered stale.\n     *\n     * There are exceptions however:\n     * -  If the wallet supports dynamic chain addition via `eth_addEthereumChain`,\n     *    then the chain is not considered stale.\n     * -  If the `isNewChainsStale` flag is falsy on the connector, then the chain is\n     *    not considered stale.\n     *\n     * For the above cases, chain validation occurs dynamically when the user\n     * attempts to switch chain.\n     *\n     * Also check that dapp supports at least 1 chain from previously approved session.\n     */\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _isChainsStale);\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, _createProvider);\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"id\", _dist_walletIds_afeb5af2_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__.w.walletConnect);\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"name\", \"WalletConnect\");\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"ready\", true);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__._)(this, _provider, {\n      writable: true,\n      value: void 0\n    });\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__._)(this, _initProviderPromise, {\n      writable: true,\n      value: void 0\n    });\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__._)(this, _storage, {\n      writable: true,\n      value: void 0\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"onAccountsChanged\", accounts => {\n      if (accounts.length === 0) {\n        this.emit(\"disconnect\");\n      } else {\n        if (accounts[0]) {\n          this.emit(\"change\", {\n            account: ethers__WEBPACK_IMPORTED_MODULE_6__.utils.getAddress(accounts[0])\n          });\n        }\n      }\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"onChainChanged\", async chainId => {\n      const id = Number(chainId);\n      const unsupported = this.isChainUnsupported(id);\n      await (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _storage).setItem(LAST_USED_CHAIN_ID, String(chainId));\n      this.emit(\"change\", {\n        chain: {\n          id,\n          unsupported\n        }\n      });\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"onDisconnect\", async () => {\n      await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _setRequestedChainsIds, _setRequestedChainsIds2).call(this, []);\n      await (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _storage).removeItem(LAST_USED_CHAIN_ID);\n      this.emit(\"disconnect\");\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"onDisplayUri\", uri => {\n      this.emit(\"message\", {\n        type: \"display_uri\",\n        data: uri\n      });\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"onConnect\", () => {\n      this.emit(\"connect\", {\n        provider: (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)\n      });\n    });\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a)(this, _storage, config.options.storage);\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _createProvider, _createProvider2).call(this);\n    this.filteredChains = this.chains.length > 50 ? this.chains.filter(c => {\n      return chainsToRequest.has(c.chainId);\n    }) : this.chains;\n    this.showWalletConnectModal = this.options.qrcode !== false;\n  }\n  async connect() {\n    let {\n      chainId: chainIdP,\n      pairingTopic\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    try {\n      let targetChainId = chainIdP;\n      if (!targetChainId) {\n        const lastUsedChainIdStr = await (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _storage).getItem(LAST_USED_CHAIN_ID);\n        const lastUsedChainId = lastUsedChainIdStr ? parseInt(lastUsedChainIdStr) : undefined;\n        if (lastUsedChainId && !this.isChainUnsupported(lastUsedChainId)) {\n          targetChainId = lastUsedChainId;\n        } else {\n          targetChainId = this.filteredChains[0]?.chainId;\n        }\n      }\n      if (!targetChainId) {\n        throw new Error(\"No chains found on connector.\");\n      }\n      const provider = await this.getProvider();\n      this.setupListeners();\n      const isChainsStale = await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _isChainsStale, _isChainsStale2).call(this);\n\n      // If there is an active session with stale chains, disconnect the current session.\n      if (provider.session && isChainsStale) {\n        await provider.disconnect();\n      }\n\n      // If there no active session, or the chains are stale, connect.\n      if (!provider.session || isChainsStale) {\n        const optionalChains = this.filteredChains.filter(chain => chain.chainId !== targetChainId).map(optionalChain => optionalChain.chainId);\n        this.emit(\"message\", {\n          type: \"connecting\"\n        });\n        await provider.connect({\n          pairingTopic,\n          chains: [targetChainId],\n          optionalChains: optionalChains.length > 0 ? optionalChains : [targetChainId]\n        });\n        await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _setRequestedChainsIds, _setRequestedChainsIds2).call(this, this.filteredChains.map(_ref => {\n          let {\n            chainId\n          } = _ref;\n          return chainId;\n        }));\n      }\n\n      // If session exists and chains are authorized, enable provider for required chain\n      const accounts = await provider.enable();\n      if (!accounts[0]) {\n        throw new Error(\"No accounts found on provider.\");\n      }\n      const account = ethers__WEBPACK_IMPORTED_MODULE_6__.utils.getAddress(accounts[0]);\n      const id = await this.getChainId();\n      const unsupported = this.isChainUnsupported(id);\n      return {\n        account,\n        chain: {\n          id,\n          unsupported\n        },\n        provider: new ethers__WEBPACK_IMPORTED_MODULE_6__.providers.Web3Provider(provider)\n      };\n    } catch (error) {\n      if (/user rejected/i.test(error?.message)) {\n        throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.U(error);\n      }\n      throw error;\n    }\n  }\n  async disconnect() {\n    const cleanup = () => {\n      if (typeof localStorage === \"undefined\") {\n        return;\n      }\n      for (const key in localStorage) {\n        if (key.startsWith(\"wc@2\")) {\n          localStorage.removeItem(key);\n        }\n      }\n    };\n    cleanup();\n    const provider = await this.getProvider();\n    const disconnectProvider = async () => {\n      try {\n        await provider.disconnect();\n      } catch (error) {\n        if (!/No matching key/i.test(error.message)) {\n          throw error;\n        }\n      } finally {\n        (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _removeListeners, _removeListeners2).call(this);\n        await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _setRequestedChainsIds, _setRequestedChainsIds2).call(this, []);\n        cleanup();\n      }\n    };\n    disconnectProvider();\n  }\n  async getAccount() {\n    const {\n      accounts\n    } = await this.getProvider();\n    if (!accounts[0]) {\n      throw new Error(\"No accounts found on provider.\");\n    }\n    return ethers__WEBPACK_IMPORTED_MODULE_6__.utils.getAddress(accounts[0]);\n  }\n  async getChainId() {\n    const {\n      chainId\n    } = await this.getProvider();\n    return chainId;\n  }\n  async getProvider() {\n    let {\n      chainId\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)) {\n      await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _createProvider, _createProvider2).call(this);\n    }\n    if (chainId) {\n      await this.switchChain(chainId);\n    }\n    if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)) {\n      throw new Error(\"No provider found.\");\n    }\n    return (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider);\n  }\n  async getSigner() {\n    let {\n      chainId\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const [provider, account] = await Promise.all([this.getProvider({\n      chainId\n    }), this.getAccount()]);\n    return new ethers__WEBPACK_IMPORTED_MODULE_6__.providers.Web3Provider(provider, chainId).getSigner(account);\n  }\n  async isAuthorized() {\n    try {\n      const [account, provider] = await Promise.all([this.getAccount(), this.getProvider()]);\n      const isChainsStale = await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _isChainsStale, _isChainsStale2).call(this);\n\n      // If an account does not exist on the session, then the connector is unauthorized.\n      if (!account) {\n        return false;\n      }\n\n      // If the chains are stale on the session, then the connector is unauthorized.\n      if (isChainsStale && provider.session) {\n        try {\n          await provider.disconnect();\n        } catch {} // eslint-disable-line no-empty\n        return false;\n      }\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  async switchChain(chainId) {\n    const chain = this.chains.find(chain_ => chain_.chainId === chainId);\n    if (!chain) {\n      throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.S(`Chain with ID: ${chainId}, not found on connector.`);\n    }\n    try {\n      const provider = await this.getProvider();\n      const namespaceChains = (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _getNamespaceChainsIds, _getNamespaceChainsIds2).call(this);\n      const namespaceMethods = (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _getNamespaceMethods, _getNamespaceMethods2).call(this);\n      const isChainApproved = namespaceChains.includes(chainId);\n      if (!isChainApproved && namespaceMethods.includes(ADD_ETH_CHAIN_METHOD)) {\n        const firstExplorer = chain.explorers && chain.explorers[0];\n        const blockExplorerUrls = firstExplorer ? {\n          blockExplorerUrls: [firstExplorer.url]\n        } : {};\n        await provider.request({\n          method: ADD_ETH_CHAIN_METHOD,\n          params: [{\n            chainId: ethers__WEBPACK_IMPORTED_MODULE_6__.utils.hexValue(chain.chainId),\n            chainName: chain.name,\n            nativeCurrency: chain.nativeCurrency,\n            rpcUrls: (0,_dist_url_bc88b2b6_browser_esm_js__WEBPACK_IMPORTED_MODULE_8__.g)(chain),\n            // no clientId on purpose\n            ...blockExplorerUrls\n          }]\n        });\n        const requestedChains = await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _getRequestedChainsIds, _getRequestedChainsIds2).call(this);\n        requestedChains.push(chainId);\n        await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _setRequestedChainsIds, _setRequestedChainsIds2).call(this, requestedChains);\n      }\n      await provider.request({\n        method: \"wallet_switchEthereumChain\",\n        params: [{\n          chainId: ethers__WEBPACK_IMPORTED_MODULE_6__.utils.hexValue(chainId)\n        }]\n      });\n      return chain;\n    } catch (error) {\n      const message = typeof error === \"string\" ? error : error?.message;\n      if (/user rejected request/i.test(message)) {\n        throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.U(error);\n      }\n      throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.S(error);\n    }\n  }\n  async initProvider() {\n    const {\n      default: EthereumProvider,\n      OPTIONAL_EVENTS,\n      OPTIONAL_METHODS\n    } = await __webpack_require__.e(/*! import() */ \"node_modules_walletconnect_ethereum-provider_dist_index_es_js\").then(__webpack_require__.bind(__webpack_require__, /*! @walletconnect/ethereum-provider */ \"./node_modules/@walletconnect/ethereum-provider/dist/index.es.js\"));\n    const [defaultChain, ...optionalChains] = this.filteredChains.map(_ref2 => {\n      let {\n        chainId\n      } = _ref2;\n      return chainId;\n    });\n    if (defaultChain) {\n      // EthereumProvider populates & deduplicates required methods and events internally\n      (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a)(this, _provider, await EthereumProvider.init({\n        showQrModal: this.showWalletConnectModal,\n        projectId: this.options.projectId,\n        optionalMethods: OPTIONAL_METHODS,\n        optionalEvents: OPTIONAL_EVENTS,\n        chains: [defaultChain],\n        optionalChains: optionalChains,\n        metadata: {\n          name: this.options.dappMetadata.name,\n          description: this.options.dappMetadata.description || \"\",\n          url: this.options.dappMetadata.url,\n          icons: [this.options.dappMetadata.logoUrl || \"\"]\n        },\n        rpcMap: Object.fromEntries(this.filteredChains.map(chain => [chain.chainId, chain.rpc[0] || \"\" // TODO: handle chain.rpc being empty array\n        ])),\n\n        qrModalOptions: this.options.qrModalOptions\n      }));\n    }\n  }\n  async setupListeners() {\n    if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)) {\n      return;\n    }\n    (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _removeListeners, _removeListeners2).call(this);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).on(\"accountsChanged\", this.onAccountsChanged);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).on(\"chainChanged\", this.onChainChanged);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).on(\"disconnect\", this.onDisconnect);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).on(\"session_delete\", this.onDisconnect);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).on(\"display_uri\", this.onDisplayUri);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).on(\"connect\", this.onConnect);\n  }\n}\nasync function _createProvider2() {\n  if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _initProviderPromise) && \"object\" !== \"undefined\") {\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a)(this, _initProviderPromise, this.initProvider());\n  }\n  return (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _initProviderPromise);\n}\nasync function _isChainsStale2() {\n  const namespaceMethods = (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _getNamespaceMethods, _getNamespaceMethods2).call(this);\n  if (namespaceMethods.includes(ADD_ETH_CHAIN_METHOD)) {\n    return false;\n  }\n  if (!this.options.isNewChainsStale) {\n    return false;\n  }\n  const requestedChains = await (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _getRequestedChainsIds, _getRequestedChainsIds2).call(this);\n  const connectorChains = this.filteredChains.map(_ref3 => {\n    let {\n      chainId\n    } = _ref3;\n    return chainId;\n  });\n  const namespaceChains = (0,_dist_classPrivateMethodGet_ea199cc3_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, _getNamespaceChainsIds, _getNamespaceChainsIds2).call(this);\n  if (namespaceChains.length && !namespaceChains.some(id => connectorChains.includes(id))) {\n    return false;\n  }\n  return !connectorChains.every(id => requestedChains.includes(id));\n}\nfunction _removeListeners2() {\n  if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)) {\n    return;\n  }\n  (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).removeListener(\"accountsChanged\", this.onAccountsChanged);\n  (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).removeListener(\"chainChanged\", this.onChainChanged);\n  (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).removeListener(\"disconnect\", this.onDisconnect);\n  (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).removeListener(\"session_delete\", this.onDisconnect);\n  (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).removeListener(\"display_uri\", this.onDisplayUri);\n  (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).removeListener(\"connect\", this.onConnect);\n}\nasync function _setRequestedChainsIds2(chains) {\n  await (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _storage).setItem(REQUESTED_CHAINS_KEY, JSON.stringify(chains));\n}\nasync function _getRequestedChainsIds2() {\n  const data = await (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _storage).getItem(REQUESTED_CHAINS_KEY);\n  return data ? JSON.parse(data) : [];\n}\nfunction _getNamespaceChainsIds2() {\n  if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)) {\n    return [];\n  }\n  const chainIds = (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).session?.namespaces[NAMESPACE]?.chains?.map(chain => parseInt(chain.split(\":\")[1] || \"\"));\n  return chainIds ?? [];\n}\nfunction _getNamespaceMethods2() {\n  if (!(0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider)) {\n    return [];\n  }\n  const methods = (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _provider).session?.namespaces[NAMESPACE]?.methods;\n  return methods ?? [];\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHRoaXJkd2ViLWRldi93YWxsZXRzL2V2bS9jb25uZWN0b3JzL3dhbGxldC1jb25uZWN0L2Rpc3QvdGhpcmR3ZWItZGV2LXdhbGxldHMtZXZtLWNvbm5lY3RvcnMtd2FsbGV0LWNvbm5lY3QuYnJvd3Nlci5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUErSTtBQUN5QjtBQUN6RTtBQUN3QjtBQUM3RTtBQUMwQztBQUNLO0FBQ0s7QUFDaEU7QUFDUDs7QUFFdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDJFQUFjO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUksc0ZBQTJCO0FBQy9CLElBQUksc0ZBQTJCO0FBQy9CLElBQUksc0ZBQTJCO0FBQy9CLElBQUksc0ZBQTJCO0FBQy9CLElBQUksc0ZBQTJCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxzRkFBMkI7QUFDL0IsSUFBSSxzRkFBMkI7QUFDL0IsSUFBSSwrRUFBZSxhQUFhLHNFQUFTO0FBQ3pDLElBQUksK0VBQWU7QUFDbkIsSUFBSSwrRUFBZTtBQUNuQixJQUFJLHFGQUEwQjtBQUM5QjtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUkscUZBQTBCO0FBQzlCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxxRkFBMEI7QUFDOUI7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLCtFQUFlO0FBQ25CO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLHFCQUFxQix5Q0FBSztBQUMxQixXQUFXO0FBQ1g7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLCtFQUFlO0FBQ25CO0FBQ0E7QUFDQSxZQUFZLHFGQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxJQUFJLCtFQUFlO0FBQ25CLFlBQVksc0ZBQXNCO0FBQ2xDLFlBQVkscUZBQXFCO0FBQ2pDO0FBQ0EsS0FBSztBQUNMLElBQUksK0VBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxJQUFJLCtFQUFlO0FBQ25CO0FBQ0Esa0JBQWtCLHFGQUFxQjtBQUN2QyxPQUFPO0FBQ1AsS0FBSztBQUNMLElBQUkscUZBQXFCO0FBQ3pCLElBQUksc0ZBQXNCO0FBQzFCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxxRkFBcUI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0ZBQXNCOztBQUV4RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGNBQWMsc0ZBQXNCO0FBQ3BDO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5Q0FBSztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxzQkFBc0IsNkNBQVM7QUFDL0I7QUFDQSxNQUFNO0FBQ047QUFDQSxrQkFBa0IsbUVBQXdCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLFFBQVEsc0ZBQXNCO0FBQzlCLGNBQWMsc0ZBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsV0FBVyx5Q0FBSztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLFNBQVMscUZBQXFCO0FBQzlCLFlBQVksc0ZBQXNCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxxRkFBcUI7QUFDOUI7QUFDQTtBQUNBLFdBQVcscUZBQXFCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZUFBZSw2Q0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxzRkFBc0I7O0FBRXhEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxTQUFTO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUVBQWdCLG1CQUFtQixRQUFRO0FBQzNEO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixzRkFBc0I7QUFDcEQsK0JBQStCLHNGQUFzQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix5Q0FBSztBQUMxQjtBQUNBO0FBQ0EscUJBQXFCLG9FQUFvQjtBQUN6QztBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVCxzQ0FBc0Msc0ZBQXNCO0FBQzVEO0FBQ0EsY0FBYyxzRkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIseUNBQUs7QUFDeEIsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0Esa0JBQWtCLG1FQUF3QjtBQUMxQztBQUNBLGdCQUFnQixtRUFBZ0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLFFBQVEsc1FBQTBDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsTUFBTSxxRkFBcUI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVMscUZBQXFCO0FBQzlCO0FBQ0E7QUFDQSxJQUFJLHNGQUFzQjtBQUMxQixJQUFJLHFGQUFxQjtBQUN6QixJQUFJLHFGQUFxQjtBQUN6QixJQUFJLHFGQUFxQjtBQUN6QixJQUFJLHFGQUFxQjtBQUN6QixJQUFJLHFGQUFxQjtBQUN6QixJQUFJLHFGQUFxQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxPQUFPLHFGQUFxQjtBQUM1QixJQUFJLHFGQUFxQjtBQUN6QjtBQUNBLFNBQVMscUZBQXFCO0FBQzlCO0FBQ0E7QUFDQSwyQkFBMkIsc0ZBQXNCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxzRkFBc0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsR0FBRztBQUNILDBCQUEwQixzRkFBc0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxxRkFBcUI7QUFDNUI7QUFDQTtBQUNBLEVBQUUscUZBQXFCO0FBQ3ZCLEVBQUUscUZBQXFCO0FBQ3ZCLEVBQUUscUZBQXFCO0FBQ3ZCLEVBQUUscUZBQXFCO0FBQ3ZCLEVBQUUscUZBQXFCO0FBQ3ZCLEVBQUUscUZBQXFCO0FBQ3ZCO0FBQ0E7QUFDQSxRQUFRLHFGQUFxQjtBQUM3QjtBQUNBO0FBQ0EscUJBQXFCLHFGQUFxQjtBQUMxQztBQUNBO0FBQ0E7QUFDQSxPQUFPLHFGQUFxQjtBQUM1QjtBQUNBO0FBQ0EsbUJBQW1CLHFGQUFxQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSxPQUFPLHFGQUFxQjtBQUM1QjtBQUNBO0FBQ0Esa0JBQWtCLHFGQUFxQjtBQUN2QztBQUNBOztBQUVrQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHRoaXJkd2ViLWRldi93YWxsZXRzL2V2bS9jb25uZWN0b3JzL3dhbGxldC1jb25uZWN0L2Rpc3QvdGhpcmR3ZWItZGV2LXdhbGxldHMtZXZtLWNvbm5lY3RvcnMtd2FsbGV0LWNvbm5lY3QuYnJvd3Nlci5lc20uanM/NjIyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfIGFzIF9jbGFzc1ByaXZhdGVNZXRob2RJbml0U3BlYywgYSBhcyBfY2xhc3NQcml2YXRlTWV0aG9kR2V0IH0gZnJvbSAnLi4vLi4vLi4vLi4vZGlzdC9jbGFzc1ByaXZhdGVNZXRob2RHZXQtZWExOTljYzMuYnJvd3Nlci5lc20uanMnO1xuaW1wb3J0IHsgXyBhcyBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYywgYiBhcyBfY2xhc3NQcml2YXRlRmllbGRHZXQsIGEgYXMgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0IH0gZnJvbSAnLi4vLi4vLi4vLi4vZGlzdC9jbGFzc1ByaXZhdGVGaWVsZFNldC1hNWRiN2M4My5icm93c2VyLmVzbS5qcyc7XG5pbXBvcnQgeyBfIGFzIF9kZWZpbmVQcm9wZXJ0eSB9IGZyb20gJy4uLy4uLy4uLy4uL2Rpc3QvZGVmaW5lUHJvcGVydHktYzhlY2RjMDcuYnJvd3Nlci5lc20uanMnO1xuaW1wb3J0IHsgVSBhcyBVc2VyUmVqZWN0ZWRSZXF1ZXN0RXJyb3IsIFMgYXMgU3dpdGNoQ2hhaW5FcnJvciB9IGZyb20gJy4uLy4uLy4uLy4uL2Rpc3QvZXJyb3JzLWVjNGU1M2U5LmJyb3dzZXIuZXNtLmpzJztcbmltcG9ydCB7IHV0aWxzLCBwcm92aWRlcnMgfSBmcm9tICdldGhlcnMnO1xuaW1wb3J0IHsgdyBhcyB3YWxsZXRJZHMgfSBmcm9tICcuLi8uLi8uLi8uLi9kaXN0L3dhbGxldElkcy1hZmViNWFmMi5icm93c2VyLmVzbS5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldFZhbGlkUHVibGljUlBDVXJsIH0gZnJvbSAnLi4vLi4vLi4vLi4vZGlzdC91cmwtYmM4OGIyYjYuYnJvd3Nlci5lc20uanMnO1xuaW1wb3J0IHsgVyBhcyBXYWdtaUNvbm5lY3RvciB9IGZyb20gJy4uLy4uLy4uLy4uL2Rpc3QvV2FnbWlDb25uZWN0b3ItMmYxNDAwMmQuYnJvd3Nlci5lc20uanMnO1xuaW1wb3J0ICdAdGhpcmR3ZWItZGV2L2NoYWlucyc7XG5pbXBvcnQgJ2V2ZW50ZW1pdHRlcjMnO1xuXG5jb25zdCBjaGFpbnNUb1JlcXVlc3QgPSBuZXcgU2V0KFsxLCAxMzcsIDEwLCA0MjE2MSwgNTZdKTtcbmNvbnN0IE5BTUVTUEFDRSA9IFwiZWlwMTU1XCI7XG5jb25zdCBSRVFVRVNURURfQ0hBSU5TX0tFWSA9IFwid2FnbWkucmVxdWVzdGVkQ2hhaW5zXCI7XG5jb25zdCBBRERfRVRIX0NIQUlOX01FVEhPRCA9IFwid2FsbGV0X2FkZEV0aGVyZXVtQ2hhaW5cIjtcbmNvbnN0IExBU1RfVVNFRF9DSEFJTl9JRCA9IFwibGFzdC11c2VkLWNoYWluLWlkXCI7XG52YXIgX3Byb3ZpZGVyID0gLyojX19QVVJFX18qL25ldyBXZWFrTWFwKCk7XG52YXIgX2luaXRQcm92aWRlclByb21pc2UgPSAvKiNfX1BVUkVfXyovbmV3IFdlYWtNYXAoKTtcbnZhciBfc3RvcmFnZSA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha01hcCgpO1xudmFyIF9jcmVhdGVQcm92aWRlciA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha1NldCgpO1xudmFyIF9pc0NoYWluc1N0YWxlID0gLyojX19QVVJFX18qL25ldyBXZWFrU2V0KCk7XG52YXIgX3JlbW92ZUxpc3RlbmVycyA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha1NldCgpO1xudmFyIF9zZXRSZXF1ZXN0ZWRDaGFpbnNJZHMgPSAvKiNfX1BVUkVfXyovbmV3IFdlYWtTZXQoKTtcbnZhciBfZ2V0UmVxdWVzdGVkQ2hhaW5zSWRzID0gLyojX19QVVJFX18qL25ldyBXZWFrU2V0KCk7XG52YXIgX2dldE5hbWVzcGFjZUNoYWluc0lkcyA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha1NldCgpO1xudmFyIF9nZXROYW1lc3BhY2VNZXRob2RzID0gLyojX19QVVJFX18qL25ldyBXZWFrU2V0KCk7XG5jbGFzcyBXYWxsZXRDb25uZWN0Q29ubmVjdG9yIGV4dGVuZHMgV2FnbWlDb25uZWN0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7XG4gICAgICAuLi5jb25maWcsXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGlzTmV3Q2hhaW5zU3RhbGU6IHRydWUsXG4gICAgICAgIC4uLmNvbmZpZy5vcHRpb25zXG4gICAgICB9XG4gICAgfSk7XG4gICAgX2NsYXNzUHJpdmF0ZU1ldGhvZEluaXRTcGVjKHRoaXMsIF9nZXROYW1lc3BhY2VNZXRob2RzKTtcbiAgICBfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWModGhpcywgX2dldE5hbWVzcGFjZUNoYWluc0lkcyk7XG4gICAgX2NsYXNzUHJpdmF0ZU1ldGhvZEluaXRTcGVjKHRoaXMsIF9nZXRSZXF1ZXN0ZWRDaGFpbnNJZHMpO1xuICAgIF9jbGFzc1ByaXZhdGVNZXRob2RJbml0U3BlYyh0aGlzLCBfc2V0UmVxdWVzdGVkQ2hhaW5zSWRzKTtcbiAgICBfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWModGhpcywgX3JlbW92ZUxpc3RlbmVycyk7XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSB0YXJnZXQgY2hhaW5zIG1hdGNoIHRoZSBjaGFpbnMgdGhhdCB3ZXJlXG4gICAgICogaW5pdGlhbGx5IHJlcXVlc3RlZCBieSB0aGUgY29ubmVjdG9yIGZvciB0aGUgV2FsbGV0Q29ubmVjdCBzZXNzaW9uLlxuICAgICAqIElmIHRoZXJlIGlzIGEgbWlzbWF0Y2gsIHRoaXMgbWVhbnMgdGhhdCB0aGUgY2hhaW5zIG9uIHRoZSBjb25uZWN0b3JcbiAgICAgKiBhcmUgY29uc2lkZXJlZCBzdGFsZSwgYW5kIG5lZWQgdG8gYmUgcmV2YWxpZGF0ZWQgYXQgYSBsYXRlciBwb2ludCAodmlhXG4gICAgICogY29ubmVjdGlvbikuXG4gICAgICpcbiAgICAgKiBUaGVyZSBtYXkgYmUgYSBzY2VuYXJpbyB3aGVyZSBhIGRhcHAgYWRkcyBhIGNoYWluIHRvIHRoZVxuICAgICAqIGNvbm5lY3RvciBsYXRlciBvbiwgaG93ZXZlciwgdGhpcyBjaGFpbiB3aWxsIG5vdCBoYXZlIGJlZW4gYXBwcm92ZWQgb3IgcmVqZWN0ZWRcbiAgICAgKiBieSB0aGUgd2FsbGV0LiBJbiB0aGlzIGNhc2UsIHRoZSBjaGFpbiBpcyBjb25zaWRlcmVkIHN0YWxlLlxuICAgICAqXG4gICAgICogVGhlcmUgYXJlIGV4Y2VwdGlvbnMgaG93ZXZlcjpcbiAgICAgKiAtICBJZiB0aGUgd2FsbGV0IHN1cHBvcnRzIGR5bmFtaWMgY2hhaW4gYWRkaXRpb24gdmlhIGBldGhfYWRkRXRoZXJldW1DaGFpbmAsXG4gICAgICogICAgdGhlbiB0aGUgY2hhaW4gaXMgbm90IGNvbnNpZGVyZWQgc3RhbGUuXG4gICAgICogLSAgSWYgdGhlIGBpc05ld0NoYWluc1N0YWxlYCBmbGFnIGlzIGZhbHN5IG9uIHRoZSBjb25uZWN0b3IsIHRoZW4gdGhlIGNoYWluIGlzXG4gICAgICogICAgbm90IGNvbnNpZGVyZWQgc3RhbGUuXG4gICAgICpcbiAgICAgKiBGb3IgdGhlIGFib3ZlIGNhc2VzLCBjaGFpbiB2YWxpZGF0aW9uIG9jY3VycyBkeW5hbWljYWxseSB3aGVuIHRoZSB1c2VyXG4gICAgICogYXR0ZW1wdHMgdG8gc3dpdGNoIGNoYWluLlxuICAgICAqXG4gICAgICogQWxzbyBjaGVjayB0aGF0IGRhcHAgc3VwcG9ydHMgYXQgbGVhc3QgMSBjaGFpbiBmcm9tIHByZXZpb3VzbHkgYXBwcm92ZWQgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWModGhpcywgX2lzQ2hhaW5zU3RhbGUpO1xuICAgIF9jbGFzc1ByaXZhdGVNZXRob2RJbml0U3BlYyh0aGlzLCBfY3JlYXRlUHJvdmlkZXIpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlkXCIsIHdhbGxldElkcy53YWxsZXRDb25uZWN0KTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIFwiV2FsbGV0Q29ubmVjdFwiKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWFkeVwiLCB0cnVlKTtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYyh0aGlzLCBfcHJvdmlkZXIsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHZvaWQgMFxuICAgIH0pO1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjKHRoaXMsIF9pbml0UHJvdmlkZXJQcm9taXNlLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYyh0aGlzLCBfc3RvcmFnZSwge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogdm9pZCAwXG4gICAgfSk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwib25BY2NvdW50c0NoYW5nZWRcIiwgYWNjb3VudHMgPT4ge1xuICAgICAgaWYgKGFjY291bnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLmVtaXQoXCJkaXNjb25uZWN0XCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGFjY291bnRzWzBdKSB7XG4gICAgICAgICAgdGhpcy5lbWl0KFwiY2hhbmdlXCIsIHtcbiAgICAgICAgICAgIGFjY291bnQ6IHV0aWxzLmdldEFkZHJlc3MoYWNjb3VudHNbMF0pXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbkNoYWluQ2hhbmdlZFwiLCBhc3luYyBjaGFpbklkID0+IHtcbiAgICAgIGNvbnN0IGlkID0gTnVtYmVyKGNoYWluSWQpO1xuICAgICAgY29uc3QgdW5zdXBwb3J0ZWQgPSB0aGlzLmlzQ2hhaW5VbnN1cHBvcnRlZChpZCk7XG4gICAgICBhd2FpdCBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3N0b3JhZ2UpLnNldEl0ZW0oTEFTVF9VU0VEX0NIQUlOX0lELCBTdHJpbmcoY2hhaW5JZCkpO1xuICAgICAgdGhpcy5lbWl0KFwiY2hhbmdlXCIsIHtcbiAgICAgICAgY2hhaW46IHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICB1bnN1cHBvcnRlZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbkRpc2Nvbm5lY3RcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgX2NsYXNzUHJpdmF0ZU1ldGhvZEdldCh0aGlzLCBfc2V0UmVxdWVzdGVkQ2hhaW5zSWRzLCBfc2V0UmVxdWVzdGVkQ2hhaW5zSWRzMikuY2FsbCh0aGlzLCBbXSk7XG4gICAgICBhd2FpdCBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3N0b3JhZ2UpLnJlbW92ZUl0ZW0oTEFTVF9VU0VEX0NIQUlOX0lEKTtcbiAgICAgIHRoaXMuZW1pdChcImRpc2Nvbm5lY3RcIik7XG4gICAgfSk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwib25EaXNwbGF5VXJpXCIsIHVyaSA9PiB7XG4gICAgICB0aGlzLmVtaXQoXCJtZXNzYWdlXCIsIHtcbiAgICAgICAgdHlwZTogXCJkaXNwbGF5X3VyaVwiLFxuICAgICAgICBkYXRhOiB1cmlcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uQ29ubmVjdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXQoXCJjb25uZWN0XCIsIHtcbiAgICAgICAgcHJvdmlkZXI6IF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX3N0b3JhZ2UsIGNvbmZpZy5vcHRpb25zLnN0b3JhZ2UpO1xuICAgIF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX2NyZWF0ZVByb3ZpZGVyLCBfY3JlYXRlUHJvdmlkZXIyKS5jYWxsKHRoaXMpO1xuICAgIHRoaXMuZmlsdGVyZWRDaGFpbnMgPSB0aGlzLmNoYWlucy5sZW5ndGggPiA1MCA/IHRoaXMuY2hhaW5zLmZpbHRlcihjID0+IHtcbiAgICAgIHJldHVybiBjaGFpbnNUb1JlcXVlc3QuaGFzKGMuY2hhaW5JZCk7XG4gICAgfSkgOiB0aGlzLmNoYWlucztcbiAgICB0aGlzLnNob3dXYWxsZXRDb25uZWN0TW9kYWwgPSB0aGlzLm9wdGlvbnMucXJjb2RlICE9PSBmYWxzZTtcbiAgfVxuICBhc3luYyBjb25uZWN0KCkge1xuICAgIGxldCB7XG4gICAgICBjaGFpbklkOiBjaGFpbklkUCxcbiAgICAgIHBhaXJpbmdUb3BpY1xuICAgIH0gPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHRyeSB7XG4gICAgICBsZXQgdGFyZ2V0Q2hhaW5JZCA9IGNoYWluSWRQO1xuICAgICAgaWYgKCF0YXJnZXRDaGFpbklkKSB7XG4gICAgICAgIGNvbnN0IGxhc3RVc2VkQ2hhaW5JZFN0ciA9IGF3YWl0IF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfc3RvcmFnZSkuZ2V0SXRlbShMQVNUX1VTRURfQ0hBSU5fSUQpO1xuICAgICAgICBjb25zdCBsYXN0VXNlZENoYWluSWQgPSBsYXN0VXNlZENoYWluSWRTdHIgPyBwYXJzZUludChsYXN0VXNlZENoYWluSWRTdHIpIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAobGFzdFVzZWRDaGFpbklkICYmICF0aGlzLmlzQ2hhaW5VbnN1cHBvcnRlZChsYXN0VXNlZENoYWluSWQpKSB7XG4gICAgICAgICAgdGFyZ2V0Q2hhaW5JZCA9IGxhc3RVc2VkQ2hhaW5JZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YXJnZXRDaGFpbklkID0gdGhpcy5maWx0ZXJlZENoYWluc1swXT8uY2hhaW5JZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCF0YXJnZXRDaGFpbklkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGNoYWlucyBmb3VuZCBvbiBjb25uZWN0b3IuXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgcHJvdmlkZXIgPSBhd2FpdCB0aGlzLmdldFByb3ZpZGVyKCk7XG4gICAgICB0aGlzLnNldHVwTGlzdGVuZXJzKCk7XG4gICAgICBjb25zdCBpc0NoYWluc1N0YWxlID0gYXdhaXQgX2NsYXNzUHJpdmF0ZU1ldGhvZEdldCh0aGlzLCBfaXNDaGFpbnNTdGFsZSwgX2lzQ2hhaW5zU3RhbGUyKS5jYWxsKHRoaXMpO1xuXG4gICAgICAvLyBJZiB0aGVyZSBpcyBhbiBhY3RpdmUgc2Vzc2lvbiB3aXRoIHN0YWxlIGNoYWlucywgZGlzY29ubmVjdCB0aGUgY3VycmVudCBzZXNzaW9uLlxuICAgICAgaWYgKHByb3ZpZGVyLnNlc3Npb24gJiYgaXNDaGFpbnNTdGFsZSkge1xuICAgICAgICBhd2FpdCBwcm92aWRlci5kaXNjb25uZWN0KCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZXJlIG5vIGFjdGl2ZSBzZXNzaW9uLCBvciB0aGUgY2hhaW5zIGFyZSBzdGFsZSwgY29ubmVjdC5cbiAgICAgIGlmICghcHJvdmlkZXIuc2Vzc2lvbiB8fCBpc0NoYWluc1N0YWxlKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbmFsQ2hhaW5zID0gdGhpcy5maWx0ZXJlZENoYWlucy5maWx0ZXIoY2hhaW4gPT4gY2hhaW4uY2hhaW5JZCAhPT0gdGFyZ2V0Q2hhaW5JZCkubWFwKG9wdGlvbmFsQ2hhaW4gPT4gb3B0aW9uYWxDaGFpbi5jaGFpbklkKTtcbiAgICAgICAgdGhpcy5lbWl0KFwibWVzc2FnZVwiLCB7XG4gICAgICAgICAgdHlwZTogXCJjb25uZWN0aW5nXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHByb3ZpZGVyLmNvbm5lY3Qoe1xuICAgICAgICAgIHBhaXJpbmdUb3BpYyxcbiAgICAgICAgICBjaGFpbnM6IFt0YXJnZXRDaGFpbklkXSxcbiAgICAgICAgICBvcHRpb25hbENoYWluczogb3B0aW9uYWxDaGFpbnMubGVuZ3RoID4gMCA/IG9wdGlvbmFsQ2hhaW5zIDogW3RhcmdldENoYWluSWRdXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9zZXRSZXF1ZXN0ZWRDaGFpbnNJZHMsIF9zZXRSZXF1ZXN0ZWRDaGFpbnNJZHMyKS5jYWxsKHRoaXMsIHRoaXMuZmlsdGVyZWRDaGFpbnMubWFwKF9yZWYgPT4ge1xuICAgICAgICAgIGxldCB7XG4gICAgICAgICAgICBjaGFpbklkXG4gICAgICAgICAgfSA9IF9yZWY7XG4gICAgICAgICAgcmV0dXJuIGNoYWluSWQ7XG4gICAgICAgIH0pKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgc2Vzc2lvbiBleGlzdHMgYW5kIGNoYWlucyBhcmUgYXV0aG9yaXplZCwgZW5hYmxlIHByb3ZpZGVyIGZvciByZXF1aXJlZCBjaGFpblxuICAgICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCBwcm92aWRlci5lbmFibGUoKTtcbiAgICAgIGlmICghYWNjb3VudHNbMF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYWNjb3VudHMgZm91bmQgb24gcHJvdmlkZXIuXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgYWNjb3VudCA9IHV0aWxzLmdldEFkZHJlc3MoYWNjb3VudHNbMF0pO1xuICAgICAgY29uc3QgaWQgPSBhd2FpdCB0aGlzLmdldENoYWluSWQoKTtcbiAgICAgIGNvbnN0IHVuc3VwcG9ydGVkID0gdGhpcy5pc0NoYWluVW5zdXBwb3J0ZWQoaWQpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYWNjb3VudCxcbiAgICAgICAgY2hhaW46IHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICB1bnN1cHBvcnRlZFxuICAgICAgICB9LFxuICAgICAgICBwcm92aWRlcjogbmV3IHByb3ZpZGVycy5XZWIzUHJvdmlkZXIocHJvdmlkZXIpXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoL3VzZXIgcmVqZWN0ZWQvaS50ZXN0KGVycm9yPy5tZXNzYWdlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlclJlamVjdGVkUmVxdWVzdEVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuICBhc3luYyBkaXNjb25uZWN0KCkge1xuICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBsb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKFwid2NAMlwiKSkge1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGNsZWFudXAoKTtcbiAgICBjb25zdCBwcm92aWRlciA9IGF3YWl0IHRoaXMuZ2V0UHJvdmlkZXIoKTtcbiAgICBjb25zdCBkaXNjb25uZWN0UHJvdmlkZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBwcm92aWRlci5kaXNjb25uZWN0KCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoIS9ObyBtYXRjaGluZyBrZXkvaS50ZXN0KGVycm9yLm1lc3NhZ2UpKSB7XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX3JlbW92ZUxpc3RlbmVycywgX3JlbW92ZUxpc3RlbmVyczIpLmNhbGwodGhpcyk7XG4gICAgICAgIGF3YWl0IF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX3NldFJlcXVlc3RlZENoYWluc0lkcywgX3NldFJlcXVlc3RlZENoYWluc0lkczIpLmNhbGwodGhpcywgW10pO1xuICAgICAgICBjbGVhbnVwKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBkaXNjb25uZWN0UHJvdmlkZXIoKTtcbiAgfVxuICBhc3luYyBnZXRBY2NvdW50KCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGFjY291bnRzXG4gICAgfSA9IGF3YWl0IHRoaXMuZ2V0UHJvdmlkZXIoKTtcbiAgICBpZiAoIWFjY291bnRzWzBdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhY2NvdW50cyBmb3VuZCBvbiBwcm92aWRlci5cIik7XG4gICAgfVxuICAgIHJldHVybiB1dGlscy5nZXRBZGRyZXNzKGFjY291bnRzWzBdKTtcbiAgfVxuICBhc3luYyBnZXRDaGFpbklkKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGNoYWluSWRcbiAgICB9ID0gYXdhaXQgdGhpcy5nZXRQcm92aWRlcigpO1xuICAgIHJldHVybiBjaGFpbklkO1xuICB9XG4gIGFzeW5jIGdldFByb3ZpZGVyKCkge1xuICAgIGxldCB7XG4gICAgICBjaGFpbklkXG4gICAgfSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgaWYgKCFfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Byb3ZpZGVyKSkge1xuICAgICAgYXdhaXQgX2NsYXNzUHJpdmF0ZU1ldGhvZEdldCh0aGlzLCBfY3JlYXRlUHJvdmlkZXIsIF9jcmVhdGVQcm92aWRlcjIpLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIGlmIChjaGFpbklkKSB7XG4gICAgICBhd2FpdCB0aGlzLnN3aXRjaENoYWluKGNoYWluSWQpO1xuICAgIH1cbiAgICBpZiAoIV9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBwcm92aWRlciBmb3VuZC5cIik7XG4gICAgfVxuICAgIHJldHVybiBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Byb3ZpZGVyKTtcbiAgfVxuICBhc3luYyBnZXRTaWduZXIoKSB7XG4gICAgbGV0IHtcbiAgICAgIGNoYWluSWRcbiAgICB9ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBjb25zdCBbcHJvdmlkZXIsIGFjY291bnRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMuZ2V0UHJvdmlkZXIoe1xuICAgICAgY2hhaW5JZFxuICAgIH0pLCB0aGlzLmdldEFjY291bnQoKV0pO1xuICAgIHJldHVybiBuZXcgcHJvdmlkZXJzLldlYjNQcm92aWRlcihwcm92aWRlciwgY2hhaW5JZCkuZ2V0U2lnbmVyKGFjY291bnQpO1xuICB9XG4gIGFzeW5jIGlzQXV0aG9yaXplZCgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgW2FjY291bnQsIHByb3ZpZGVyXSA9IGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLmdldEFjY291bnQoKSwgdGhpcy5nZXRQcm92aWRlcigpXSk7XG4gICAgICBjb25zdCBpc0NoYWluc1N0YWxlID0gYXdhaXQgX2NsYXNzUHJpdmF0ZU1ldGhvZEdldCh0aGlzLCBfaXNDaGFpbnNTdGFsZSwgX2lzQ2hhaW5zU3RhbGUyKS5jYWxsKHRoaXMpO1xuXG4gICAgICAvLyBJZiBhbiBhY2NvdW50IGRvZXMgbm90IGV4aXN0IG9uIHRoZSBzZXNzaW9uLCB0aGVuIHRoZSBjb25uZWN0b3IgaXMgdW5hdXRob3JpemVkLlxuICAgICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIGNoYWlucyBhcmUgc3RhbGUgb24gdGhlIHNlc3Npb24sIHRoZW4gdGhlIGNvbm5lY3RvciBpcyB1bmF1dGhvcml6ZWQuXG4gICAgICBpZiAoaXNDaGFpbnNTdGFsZSAmJiBwcm92aWRlci5zZXNzaW9uKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgcHJvdmlkZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICB9IGNhdGNoIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZW1wdHlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIGFzeW5jIHN3aXRjaENoYWluKGNoYWluSWQpIHtcbiAgICBjb25zdCBjaGFpbiA9IHRoaXMuY2hhaW5zLmZpbmQoY2hhaW5fID0+IGNoYWluXy5jaGFpbklkID09PSBjaGFpbklkKTtcbiAgICBpZiAoIWNoYWluKSB7XG4gICAgICB0aHJvdyBuZXcgU3dpdGNoQ2hhaW5FcnJvcihgQ2hhaW4gd2l0aCBJRDogJHtjaGFpbklkfSwgbm90IGZvdW5kIG9uIGNvbm5lY3Rvci5gKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gYXdhaXQgdGhpcy5nZXRQcm92aWRlcigpO1xuICAgICAgY29uc3QgbmFtZXNwYWNlQ2hhaW5zID0gX2NsYXNzUHJpdmF0ZU1ldGhvZEdldCh0aGlzLCBfZ2V0TmFtZXNwYWNlQ2hhaW5zSWRzLCBfZ2V0TmFtZXNwYWNlQ2hhaW5zSWRzMikuY2FsbCh0aGlzKTtcbiAgICAgIGNvbnN0IG5hbWVzcGFjZU1ldGhvZHMgPSBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9nZXROYW1lc3BhY2VNZXRob2RzLCBfZ2V0TmFtZXNwYWNlTWV0aG9kczIpLmNhbGwodGhpcyk7XG4gICAgICBjb25zdCBpc0NoYWluQXBwcm92ZWQgPSBuYW1lc3BhY2VDaGFpbnMuaW5jbHVkZXMoY2hhaW5JZCk7XG4gICAgICBpZiAoIWlzQ2hhaW5BcHByb3ZlZCAmJiBuYW1lc3BhY2VNZXRob2RzLmluY2x1ZGVzKEFERF9FVEhfQ0hBSU5fTUVUSE9EKSkge1xuICAgICAgICBjb25zdCBmaXJzdEV4cGxvcmVyID0gY2hhaW4uZXhwbG9yZXJzICYmIGNoYWluLmV4cGxvcmVyc1swXTtcbiAgICAgICAgY29uc3QgYmxvY2tFeHBsb3JlclVybHMgPSBmaXJzdEV4cGxvcmVyID8ge1xuICAgICAgICAgIGJsb2NrRXhwbG9yZXJVcmxzOiBbZmlyc3RFeHBsb3Jlci51cmxdXG4gICAgICAgIH0gOiB7fTtcbiAgICAgICAgYXdhaXQgcHJvdmlkZXIucmVxdWVzdCh7XG4gICAgICAgICAgbWV0aG9kOiBBRERfRVRIX0NIQUlOX01FVEhPRCxcbiAgICAgICAgICBwYXJhbXM6IFt7XG4gICAgICAgICAgICBjaGFpbklkOiB1dGlscy5oZXhWYWx1ZShjaGFpbi5jaGFpbklkKSxcbiAgICAgICAgICAgIGNoYWluTmFtZTogY2hhaW4ubmFtZSxcbiAgICAgICAgICAgIG5hdGl2ZUN1cnJlbmN5OiBjaGFpbi5uYXRpdmVDdXJyZW5jeSxcbiAgICAgICAgICAgIHJwY1VybHM6IGdldFZhbGlkUHVibGljUlBDVXJsKGNoYWluKSxcbiAgICAgICAgICAgIC8vIG5vIGNsaWVudElkIG9uIHB1cnBvc2VcbiAgICAgICAgICAgIC4uLmJsb2NrRXhwbG9yZXJVcmxzXG4gICAgICAgICAgfV1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RlZENoYWlucyA9IGF3YWl0IF9jbGFzc1ByaXZhdGVNZXRob2RHZXQodGhpcywgX2dldFJlcXVlc3RlZENoYWluc0lkcywgX2dldFJlcXVlc3RlZENoYWluc0lkczIpLmNhbGwodGhpcyk7XG4gICAgICAgIHJlcXVlc3RlZENoYWlucy5wdXNoKGNoYWluSWQpO1xuICAgICAgICBhd2FpdCBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9zZXRSZXF1ZXN0ZWRDaGFpbnNJZHMsIF9zZXRSZXF1ZXN0ZWRDaGFpbnNJZHMyKS5jYWxsKHRoaXMsIHJlcXVlc3RlZENoYWlucyk7XG4gICAgICB9XG4gICAgICBhd2FpdCBwcm92aWRlci5yZXF1ZXN0KHtcbiAgICAgICAgbWV0aG9kOiBcIndhbGxldF9zd2l0Y2hFdGhlcmV1bUNoYWluXCIsXG4gICAgICAgIHBhcmFtczogW3tcbiAgICAgICAgICBjaGFpbklkOiB1dGlscy5oZXhWYWx1ZShjaGFpbklkKVxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gY2hhaW47XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0eXBlb2YgZXJyb3IgPT09IFwic3RyaW5nXCIgPyBlcnJvciA6IGVycm9yPy5tZXNzYWdlO1xuICAgICAgaWYgKC91c2VyIHJlamVjdGVkIHJlcXVlc3QvaS50ZXN0KG1lc3NhZ2UpKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyUmVqZWN0ZWRSZXF1ZXN0RXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IFN3aXRjaENoYWluRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuICBhc3luYyBpbml0UHJvdmlkZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgZGVmYXVsdDogRXRoZXJldW1Qcm92aWRlcixcbiAgICAgIE9QVElPTkFMX0VWRU5UUyxcbiAgICAgIE9QVElPTkFMX01FVEhPRFNcbiAgICB9ID0gYXdhaXQgaW1wb3J0KCdAd2FsbGV0Y29ubmVjdC9ldGhlcmV1bS1wcm92aWRlcicpO1xuICAgIGNvbnN0IFtkZWZhdWx0Q2hhaW4sIC4uLm9wdGlvbmFsQ2hhaW5zXSA9IHRoaXMuZmlsdGVyZWRDaGFpbnMubWFwKF9yZWYyID0+IHtcbiAgICAgIGxldCB7XG4gICAgICAgIGNoYWluSWRcbiAgICAgIH0gPSBfcmVmMjtcbiAgICAgIHJldHVybiBjaGFpbklkO1xuICAgIH0pO1xuICAgIGlmIChkZWZhdWx0Q2hhaW4pIHtcbiAgICAgIC8vIEV0aGVyZXVtUHJvdmlkZXIgcG9wdWxhdGVzICYgZGVkdXBsaWNhdGVzIHJlcXVpcmVkIG1ldGhvZHMgYW5kIGV2ZW50cyBpbnRlcm5hbGx5XG4gICAgICBfY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX3Byb3ZpZGVyLCBhd2FpdCBFdGhlcmV1bVByb3ZpZGVyLmluaXQoe1xuICAgICAgICBzaG93UXJNb2RhbDogdGhpcy5zaG93V2FsbGV0Q29ubmVjdE1vZGFsLFxuICAgICAgICBwcm9qZWN0SWQ6IHRoaXMub3B0aW9ucy5wcm9qZWN0SWQsXG4gICAgICAgIG9wdGlvbmFsTWV0aG9kczogT1BUSU9OQUxfTUVUSE9EUyxcbiAgICAgICAgb3B0aW9uYWxFdmVudHM6IE9QVElPTkFMX0VWRU5UUyxcbiAgICAgICAgY2hhaW5zOiBbZGVmYXVsdENoYWluXSxcbiAgICAgICAgb3B0aW9uYWxDaGFpbnM6IG9wdGlvbmFsQ2hhaW5zLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIG5hbWU6IHRoaXMub3B0aW9ucy5kYXBwTWV0YWRhdGEubmFtZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5vcHRpb25zLmRhcHBNZXRhZGF0YS5kZXNjcmlwdGlvbiB8fCBcIlwiLFxuICAgICAgICAgIHVybDogdGhpcy5vcHRpb25zLmRhcHBNZXRhZGF0YS51cmwsXG4gICAgICAgICAgaWNvbnM6IFt0aGlzLm9wdGlvbnMuZGFwcE1ldGFkYXRhLmxvZ29VcmwgfHwgXCJcIl1cbiAgICAgICAgfSxcbiAgICAgICAgcnBjTWFwOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy5maWx0ZXJlZENoYWlucy5tYXAoY2hhaW4gPT4gW2NoYWluLmNoYWluSWQsIGNoYWluLnJwY1swXSB8fCBcIlwiIC8vIFRPRE86IGhhbmRsZSBjaGFpbi5ycGMgYmVpbmcgZW1wdHkgYXJyYXlcbiAgICAgICAgXSkpLFxuXG4gICAgICAgIHFyTW9kYWxPcHRpb25zOiB0aGlzLm9wdGlvbnMucXJNb2RhbE9wdGlvbnNcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgc2V0dXBMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKCFfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Byb3ZpZGVyKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9yZW1vdmVMaXN0ZW5lcnMsIF9yZW1vdmVMaXN0ZW5lcnMyKS5jYWxsKHRoaXMpO1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpLm9uKFwiYWNjb3VudHNDaGFuZ2VkXCIsIHRoaXMub25BY2NvdW50c0NoYW5nZWQpO1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpLm9uKFwiY2hhaW5DaGFuZ2VkXCIsIHRoaXMub25DaGFpbkNoYW5nZWQpO1xuICAgIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpLm9uKFwiZGlzY29ubmVjdFwiLCB0aGlzLm9uRGlzY29ubmVjdCk7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikub24oXCJzZXNzaW9uX2RlbGV0ZVwiLCB0aGlzLm9uRGlzY29ubmVjdCk7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikub24oXCJkaXNwbGF5X3VyaVwiLCB0aGlzLm9uRGlzcGxheVVyaSk7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikub24oXCJjb25uZWN0XCIsIHRoaXMub25Db25uZWN0KTtcbiAgfVxufVxuYXN5bmMgZnVuY3Rpb24gX2NyZWF0ZVByb3ZpZGVyMigpIHtcbiAgaWYgKCFfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX2luaXRQcm92aWRlclByb21pc2UpICYmIFwib2JqZWN0XCIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX2luaXRQcm92aWRlclByb21pc2UsIHRoaXMuaW5pdFByb3ZpZGVyKCkpO1xuICB9XG4gIHJldHVybiBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX2luaXRQcm92aWRlclByb21pc2UpO1xufVxuYXN5bmMgZnVuY3Rpb24gX2lzQ2hhaW5zU3RhbGUyKCkge1xuICBjb25zdCBuYW1lc3BhY2VNZXRob2RzID0gX2NsYXNzUHJpdmF0ZU1ldGhvZEdldCh0aGlzLCBfZ2V0TmFtZXNwYWNlTWV0aG9kcywgX2dldE5hbWVzcGFjZU1ldGhvZHMyKS5jYWxsKHRoaXMpO1xuICBpZiAobmFtZXNwYWNlTWV0aG9kcy5pbmNsdWRlcyhBRERfRVRIX0NIQUlOX01FVEhPRCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCF0aGlzLm9wdGlvbnMuaXNOZXdDaGFpbnNTdGFsZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCByZXF1ZXN0ZWRDaGFpbnMgPSBhd2FpdCBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9nZXRSZXF1ZXN0ZWRDaGFpbnNJZHMsIF9nZXRSZXF1ZXN0ZWRDaGFpbnNJZHMyKS5jYWxsKHRoaXMpO1xuICBjb25zdCBjb25uZWN0b3JDaGFpbnMgPSB0aGlzLmZpbHRlcmVkQ2hhaW5zLm1hcChfcmVmMyA9PiB7XG4gICAgbGV0IHtcbiAgICAgIGNoYWluSWRcbiAgICB9ID0gX3JlZjM7XG4gICAgcmV0dXJuIGNoYWluSWQ7XG4gIH0pO1xuICBjb25zdCBuYW1lc3BhY2VDaGFpbnMgPSBfY2xhc3NQcml2YXRlTWV0aG9kR2V0KHRoaXMsIF9nZXROYW1lc3BhY2VDaGFpbnNJZHMsIF9nZXROYW1lc3BhY2VDaGFpbnNJZHMyKS5jYWxsKHRoaXMpO1xuICBpZiAobmFtZXNwYWNlQ2hhaW5zLmxlbmd0aCAmJiAhbmFtZXNwYWNlQ2hhaW5zLnNvbWUoaWQgPT4gY29ubmVjdG9yQ2hhaW5zLmluY2x1ZGVzKGlkKSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuICFjb25uZWN0b3JDaGFpbnMuZXZlcnkoaWQgPT4gcmVxdWVzdGVkQ2hhaW5zLmluY2x1ZGVzKGlkKSk7XG59XG5mdW5jdGlvbiBfcmVtb3ZlTGlzdGVuZXJzMigpIHtcbiAgaWYgKCFfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Byb3ZpZGVyKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Byb3ZpZGVyKS5yZW1vdmVMaXN0ZW5lcihcImFjY291bnRzQ2hhbmdlZFwiLCB0aGlzLm9uQWNjb3VudHNDaGFuZ2VkKTtcbiAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikucmVtb3ZlTGlzdGVuZXIoXCJjaGFpbkNoYW5nZWRcIiwgdGhpcy5vbkNoYWluQ2hhbmdlZCk7XG4gIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpLnJlbW92ZUxpc3RlbmVyKFwiZGlzY29ubmVjdFwiLCB0aGlzLm9uRGlzY29ubmVjdCk7XG4gIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpLnJlbW92ZUxpc3RlbmVyKFwic2Vzc2lvbl9kZWxldGVcIiwgdGhpcy5vbkRpc2Nvbm5lY3QpO1xuICBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3Byb3ZpZGVyKS5yZW1vdmVMaXN0ZW5lcihcImRpc3BsYXlfdXJpXCIsIHRoaXMub25EaXNwbGF5VXJpKTtcbiAgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikucmVtb3ZlTGlzdGVuZXIoXCJjb25uZWN0XCIsIHRoaXMub25Db25uZWN0KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIF9zZXRSZXF1ZXN0ZWRDaGFpbnNJZHMyKGNoYWlucykge1xuICBhd2FpdCBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3N0b3JhZ2UpLnNldEl0ZW0oUkVRVUVTVEVEX0NIQUlOU19LRVksIEpTT04uc3RyaW5naWZ5KGNoYWlucykpO1xufVxuYXN5bmMgZnVuY3Rpb24gX2dldFJlcXVlc3RlZENoYWluc0lkczIoKSB7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBfY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX3N0b3JhZ2UpLmdldEl0ZW0oUkVRVUVTVEVEX0NIQUlOU19LRVkpO1xuICByZXR1cm4gZGF0YSA/IEpTT04ucGFyc2UoZGF0YSkgOiBbXTtcbn1cbmZ1bmN0aW9uIF9nZXROYW1lc3BhY2VDaGFpbnNJZHMyKCkge1xuICBpZiAoIV9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IGNoYWluSWRzID0gX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikuc2Vzc2lvbj8ubmFtZXNwYWNlc1tOQU1FU1BBQ0VdPy5jaGFpbnM/Lm1hcChjaGFpbiA9PiBwYXJzZUludChjaGFpbi5zcGxpdChcIjpcIilbMV0gfHwgXCJcIikpO1xuICByZXR1cm4gY2hhaW5JZHMgPz8gW107XG59XG5mdW5jdGlvbiBfZ2V0TmFtZXNwYWNlTWV0aG9kczIoKSB7XG4gIGlmICghX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9wcm92aWRlcikpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgbWV0aG9kcyA9IF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpLnNlc3Npb24/Lm5hbWVzcGFjZXNbTkFNRVNQQUNFXT8ubWV0aG9kcztcbiAgcmV0dXJuIG1ldGhvZHMgPz8gW107XG59XG5cbmV4cG9ydCB7IFdhbGxldENvbm5lY3RDb25uZWN0b3IgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@thirdweb-dev/wallets/evm/connectors/wallet-connect/dist/thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm.js\n"));

/***/ })

}]);