"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["node_modules_thirdweb-dev_wallets_evm_connectors_frame_dist_thirdweb-dev-wallets-evm-connecto-4af551"],{

/***/ "./node_modules/@thirdweb-dev/wallets/dist/url-bc88b2b6.browser.esm.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@thirdweb-dev/wallets/dist/url-bc88b2b6.browser.esm.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   g: function() { return /* binding */ getValidPublicRPCUrl; },\n/* harmony export */   i: function() { return /* binding */ isTwUrl; }\n/* harmony export */ });\n/* harmony import */ var _thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @thirdweb-dev/chains */ \"./node_modules/@thirdweb-dev/chains/dist/thirdweb-dev-chains.esm.js\");\n\n\nfunction isTwUrl(url) {\n  const host = new URL(url).hostname;\n  return host.endsWith(\".thirdweb.com\") || host === \"localhost\" || host === \"0.0.0.0\";\n}\nfunction getValidPublicRPCUrl(chain) {\n  return (0,_thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_0__.getValidChainRPCs)(chain).map(rpc => {\n    try {\n      const url = new URL(rpc);\n      // remove client id from url\n      if (url.hostname.endsWith(\".thirdweb.com\")) {\n        url.pathname = \"\";\n        url.search = \"\";\n      }\n      return url.toString();\n    } catch (e) {\n      return rpc;\n    }\n  });\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHRoaXJkd2ViLWRldi93YWxsZXRzL2Rpc3QvdXJsLWJjODhiMmI2LmJyb3dzZXIuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5RDs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUVBQWlCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFbUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0B0aGlyZHdlYi1kZXYvd2FsbGV0cy9kaXN0L3VybC1iYzg4YjJiNi5icm93c2VyLmVzbS5qcz85YmQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFZhbGlkQ2hhaW5SUENzIH0gZnJvbSAnQHRoaXJkd2ViLWRldi9jaGFpbnMnO1xuXG5mdW5jdGlvbiBpc1R3VXJsKHVybCkge1xuICBjb25zdCBob3N0ID0gbmV3IFVSTCh1cmwpLmhvc3RuYW1lO1xuICByZXR1cm4gaG9zdC5lbmRzV2l0aChcIi50aGlyZHdlYi5jb21cIikgfHwgaG9zdCA9PT0gXCJsb2NhbGhvc3RcIiB8fCBob3N0ID09PSBcIjAuMC4wLjBcIjtcbn1cbmZ1bmN0aW9uIGdldFZhbGlkUHVibGljUlBDVXJsKGNoYWluKSB7XG4gIHJldHVybiBnZXRWYWxpZENoYWluUlBDcyhjaGFpbikubWFwKHJwYyA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocnBjKTtcbiAgICAgIC8vIHJlbW92ZSBjbGllbnQgaWQgZnJvbSB1cmxcbiAgICAgIGlmICh1cmwuaG9zdG5hbWUuZW5kc1dpdGgoXCIudGhpcmR3ZWIuY29tXCIpKSB7XG4gICAgICAgIHVybC5wYXRobmFtZSA9IFwiXCI7XG4gICAgICAgIHVybC5zZWFyY2ggPSBcIlwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBycGM7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IHsgZ2V0VmFsaWRQdWJsaWNSUENVcmwgYXMgZywgaXNUd1VybCBhcyBpIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@thirdweb-dev/wallets/dist/url-bc88b2b6.browser.esm.js\n"));

/***/ }),

/***/ "./node_modules/@thirdweb-dev/wallets/evm/connectors/frame/dist/thirdweb-dev-wallets-evm-connectors-frame.browser.esm.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/@thirdweb-dev/wallets/evm/connectors/frame/dist/thirdweb-dev-wallets-evm-connectors-frame.browser.esm.js ***!
  \*******************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FrameConnector: function() { return /* binding */ FrameConnector; }\n/* harmony export */ });\n/* harmony import */ var _dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../dist/classPrivateFieldSet-a5db7c83.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/classPrivateFieldSet-a5db7c83.browser.esm.js\");\n/* harmony import */ var _dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../dist/defineProperty-c8ecdc07.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/defineProperty-c8ecdc07.browser.esm.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ethers */ \"./node_modules/ethers/lib.esm/index.js\");\n/* harmony import */ var _dist_WagmiConnector_2f14002d_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../dist/WagmiConnector-2f14002d.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/WagmiConnector-2f14002d.browser.esm.js\");\n/* harmony import */ var _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../dist/errors-ec4e53e9.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/errors-ec4e53e9.browser.esm.js\");\n/* harmony import */ var _dist_url_bc88b2b6_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../dist/url-bc88b2b6.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/url-bc88b2b6.browser.esm.js\");\n/* harmony import */ var _dist_normalizeChainId_1fb9aedf_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../dist/normalizeChainId-1fb9aedf.browser.esm.js */ \"./node_modules/@thirdweb-dev/wallets/dist/normalizeChainId-1fb9aedf.browser.esm.js\");\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! eventemitter3 */ \"./node_modules/@thirdweb-dev/wallets/node_modules/eventemitter3/index.mjs\");\n\n\n\n\n\n\n\n\n\n\nvar _provider = /*#__PURE__*/new WeakMap();\nclass FrameConnector extends _dist_WagmiConnector_2f14002d_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.W {\n  constructor(_ref) {\n    let {\n      chains,\n      options: suppliedOptions,\n      connectorStorage\n    } = _ref;\n    const options = {\n      shimDisconnect: true,\n      ...suppliedOptions\n    };\n    super({\n      chains,\n      options\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, \"id\", \"frame\");\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, \"name\", \"Frame\");\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, \"ready\", true);\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, \"shimDisconnectKey\", `${this.id}.shimDisconnect`);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, _provider, {\n      writable: true,\n      value: void 0\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, \"onAccountsChanged\", accounts => {\n      if (accounts.length === 0) {\n        this.emit(\"disconnect\");\n      } else {\n        this.emit(\"change\", {\n          account: ethers__WEBPACK_IMPORTED_MODULE_4__.utils.getAddress(accounts[0])\n        });\n      }\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, \"onChainChanged\", chainId => {\n      const id = (0,_dist_normalizeChainId_1fb9aedf_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.n)(chainId);\n      const unsupported = this.isChainUnsupported(id);\n      this.emit(\"change\", {\n        chain: {\n          id,\n          unsupported\n        }\n      });\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this, \"onDisconnect\", () => {\n      this.emit(\"disconnect\");\n      // Remove shim signalling wallet is disconnected\n      if (this.options.shimDisconnect) {\n        this.connectorStorage.removeItem(this.shimDisconnectKey);\n      }\n    });\n    this.connectorStorage = connectorStorage;\n  }\n  async connect(config) {\n    try {\n      const provider = await this.getProvider();\n      if (!provider) {\n        throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.a();\n      }\n      this.setupListeners();\n      this.emit(\"message\", {\n        type: \"connecting\"\n      });\n      const accounts = await provider.request({\n        method: \"eth_requestAccounts\"\n      });\n      const account = ethers__WEBPACK_IMPORTED_MODULE_4__.utils.getAddress(accounts[0]);\n      // Switch to chain if provided\n      let id = await this.getChainId();\n      let unsupported = this.isChainUnsupported(id);\n      if (config?.chainId && id !== config?.chainId) {\n        const chain = await this.switchChain(config?.chainId);\n        id = chain.chainId;\n        unsupported = this.isChainUnsupported(id);\n      }\n\n      // Add shim to storage signalling wallet is connected\n      if (this.options.shimDisconnect) {\n        this.connectorStorage.setItem(this.shimDisconnectKey, \"true\");\n      }\n      return {\n        account,\n        provider,\n        chain: {\n          id,\n          unsupported\n        }\n      };\n    } catch (error) {\n      if (this.isUserRejectedRequestError(error)) {\n        throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.U(error);\n      }\n      if (error.code === -32002) {\n        throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.R(error);\n      }\n      throw error;\n    }\n  }\n  async disconnect() {\n    const provider = await this.getProvider();\n    if (!provider?.removeListener) {\n      return;\n    }\n    provider.removeListener(\"accountsChanged\", this.onAccountsChanged);\n    provider.removeListener(\"chainChanged\", this.onChainChanged);\n    provider.removeListener(\"disconnect\", this.onDisconnect);\n    if (!this.isInjected()) {\n      provider.close();\n    }\n\n    // Remove shim signalling wallet is disconnected\n    if (this.options.shimDisconnect) {\n      this.connectorStorage.removeItem(this.shimDisconnectKey);\n    }\n  }\n  async getAccount() {\n    const provider = await this.getProvider();\n    if (!provider) {\n      throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.a();\n    }\n    const accounts = await provider.request({\n      method: \"eth_accounts\"\n    });\n    // return checksum address\n    return ethers__WEBPACK_IMPORTED_MODULE_4__.utils.getAddress(accounts[0]);\n  }\n  async getChainId() {\n    const provider = await this.getProvider();\n    if (!provider) {\n      throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.a();\n    }\n    const chainId = await provider.request({\n      method: \"eth_chainId\"\n    });\n    return (0,_dist_normalizeChainId_1fb9aedf_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.n)(chainId);\n  }\n  async getProvider() {\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.a)(this, _provider, this.isInjected() ? this.injectedProvider() : await this.createProvider());\n    return (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.b)(this, _provider);\n  }\n\n  /**\n   * get a `signer` for given `chainId`\n   */\n  async getSigner() {\n    let {\n      chainId\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const [provider, account] = await Promise.all([this.getProvider(), this.getAccount()]);\n\n    // ethers.providers.Web3Provider\n    return new ethers__WEBPACK_IMPORTED_MODULE_4__.providers.Web3Provider(provider, chainId).getSigner(account);\n  }\n  async isAuthorized() {\n    try {\n      if (this.options.shimDisconnect &&\n      // If shim does not exist in storage, wallet is disconnected\n      !this.connectorStorage.getItem(this.shimDisconnectKey)) {\n        return false;\n      }\n      const provider = await this.getProvider();\n      if (!provider) {\n        throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.a();\n      }\n      const account = await this.getAccount();\n      return !!account;\n    } catch {\n      return false;\n    }\n  }\n  async switchChain(chainId) {\n    const provider = await this.getProvider();\n    if (!provider) {\n      throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.a();\n    }\n    const chainIdHex = ethers__WEBPACK_IMPORTED_MODULE_4__.utils.hexValue(chainId);\n    try {\n      await Promise.all([provider.request({\n        method: \"wallet_switchEthereumChain\",\n        params: [{\n          chainId: chainIdHex\n        }]\n      }), new Promise(res => this.on(\"change\", _ref2 => {\n        let {\n          chain\n        } = _ref2;\n        if (chain?.id === chainId) {\n          res();\n        }\n      }))]);\n      return this.chains.find(x => x.chainId === chainId) ?? {\n        chainId: chainId,\n        name: `Chain ${chainIdHex}`,\n        slug: `${chainIdHex}`,\n        nativeCurrency: {\n          name: \"Ether\",\n          decimals: 18,\n          symbol: \"ETH\"\n        },\n        rpc: [\"\"],\n        chain: \"\",\n        shortName: \"\",\n        testnet: true\n      };\n    } catch (switchChainError) {\n      const chain = this.chains.find(x => x.chainId === chainId);\n      if (!chain) {\n        throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.C({\n          chainId,\n          connectorId: this.id\n        });\n      }\n\n      // Indicates chain is not added to provider\n      if (switchChainError.code === 4902) {\n        try {\n          await provider.request({\n            method: \"wallet_addEthereumChain\",\n            params: [{\n              chainId: chainIdHex,\n              chainName: chain.name,\n              nativeCurrency: chain.nativeCurrency,\n              rpcUrls: (0,_dist_url_bc88b2b6_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.g)(chain),\n              // no client id on purpose here\n              blockExplorerUrls: this.getBlockExplorerUrls(chain)\n            }]\n          });\n          const currentChainId = await this.getChainId();\n          if (currentChainId !== chainId) {\n            throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.U(new Error(\"User rejected switch after adding network.\"));\n          }\n          return chain;\n        } catch (addChainError) {\n          // if user rejects request to add chain\n          if (this.isUserRejectedRequestError(addChainError)) {\n            throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.U(addChainError);\n          }\n\n          // else other error\n          throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.A(addChainError.message);\n        }\n      }\n\n      // if user rejects request to switch chain\n      if (this.isUserRejectedRequestError(switchChainError)) {\n        throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.U(switchChainError);\n      }\n\n      // else other error\n      throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.S(switchChainError);\n    }\n  }\n  async watchAsset(_ref3) {\n    let {\n      address,\n      decimals = 18,\n      image,\n      symbol\n    } = _ref3;\n    const provider = await this.getProvider();\n    if (!provider) {\n      throw new _dist_errors_ec4e53e9_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.a();\n    }\n    return provider.request({\n      method: \"wallet_watchAsset\",\n      params: {\n        type: \"ERC20\",\n        options: {\n          address,\n          decimals,\n          image,\n          symbol\n        }\n      }\n    });\n  }\n  async setupListeners() {\n    const provider = await this.getProvider();\n    if (provider.on) {\n      provider.on(\"accountsChanged\", this.onAccountsChanged);\n      provider.on(\"chainChanged\", this.onChainChanged);\n      provider.on(\"disconnect\", this.onDisconnect);\n    }\n  }\n  isUserRejectedRequestError(error) {\n    return error.code === 4001;\n  }\n  injectedProvider() {\n    return window?.ethereum;\n  }\n  isInjected() {\n    return !!this.injectedProvider()?.isFrame;\n  }\n  async createProvider() {\n    const ethProvider = (await __webpack_require__.e(/*! import() */ \"node_modules_eth-provider_browser_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! eth-provider */ \"./node_modules/eth-provider/browser.js\", 23))).default;\n    return ethProvider(\"frame\");\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHRoaXJkd2ViLWRldi93YWxsZXRzL2V2bS9jb25uZWN0b3JzL2ZyYW1lL2Rpc3QvdGhpcmR3ZWItZGV2LXdhbGxldHMtZXZtLWNvbm5lY3RvcnMtZnJhbWUuYnJvd3Nlci5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXdLO0FBQ3pFO0FBQ3JEO0FBQ29EO0FBQ3VJO0FBQzVJO0FBQ1M7QUFDcEU7QUFDUDs7QUFFdkI7QUFDQSw2QkFBNkIsMkVBQWM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLCtFQUFlO0FBQ25CLElBQUksK0VBQWU7QUFDbkIsSUFBSSwrRUFBZTtBQUNuQixJQUFJLCtFQUFlLCtCQUErQixRQUFRO0FBQzFELElBQUkscUZBQTBCO0FBQzlCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSwrRUFBZTtBQUNuQjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsbUJBQW1CLHlDQUFLO0FBQ3hCLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTCxJQUFJLCtFQUFlO0FBQ25CLGlCQUFpQixpRkFBZ0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxJQUFJLCtFQUFlO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG1FQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLHNCQUFzQix5Q0FBSztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLGtCQUFrQixtRUFBd0I7QUFDMUM7QUFDQTtBQUNBLGtCQUFrQixtRUFBd0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUVBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFdBQVcseUNBQUs7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUVBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxXQUFXLGlGQUFnQjtBQUMzQjtBQUNBO0FBQ0EsSUFBSSxxRkFBcUI7QUFDekIsV0FBVyxxRkFBcUI7QUFDaEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0EsZUFBZSw2Q0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixtRUFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixtRUFBc0I7QUFDdEM7QUFDQSx1QkFBdUIseUNBQUs7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLHVCQUF1QixXQUFXO0FBQ2xDLGlCQUFpQixXQUFXO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLGtCQUFrQixtRUFBdUI7QUFDekM7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0VBQW9CO0FBQzNDO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0E7QUFDQSxzQkFBc0IsbUVBQXdCO0FBQzlDO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLHNCQUFzQixtRUFBd0I7QUFDOUM7O0FBRUE7QUFDQSxvQkFBb0IsbUVBQWE7QUFDakM7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLG1FQUF3QjtBQUMxQzs7QUFFQTtBQUNBLGdCQUFnQixtRUFBZ0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsZ0JBQWdCLG1FQUFzQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IscU1BQXNCO0FBQ3JEO0FBQ0E7QUFDQTs7QUFFMEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0B0aGlyZHdlYi1kZXYvd2FsbGV0cy9ldm0vY29ubmVjdG9ycy9mcmFtZS9kaXN0L3RoaXJkd2ViLWRldi13YWxsZXRzLWV2bS1jb25uZWN0b3JzLWZyYW1lLmJyb3dzZXIuZXNtLmpzPzI1ZmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgXyBhcyBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYywgYSBhcyBfY2xhc3NQcml2YXRlRmllbGRTZXQsIGIgYXMgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0IH0gZnJvbSAnLi4vLi4vLi4vLi4vZGlzdC9jbGFzc1ByaXZhdGVGaWVsZFNldC1hNWRiN2M4My5icm93c2VyLmVzbS5qcyc7XG5pbXBvcnQgeyBfIGFzIF9kZWZpbmVQcm9wZXJ0eSB9IGZyb20gJy4uLy4uLy4uLy4uL2Rpc3QvZGVmaW5lUHJvcGVydHktYzhlY2RjMDcuYnJvd3Nlci5lc20uanMnO1xuaW1wb3J0IHsgdXRpbHMsIHByb3ZpZGVycyB9IGZyb20gJ2V0aGVycyc7XG5pbXBvcnQgeyBXIGFzIFdhZ21pQ29ubmVjdG9yIH0gZnJvbSAnLi4vLi4vLi4vLi4vZGlzdC9XYWdtaUNvbm5lY3Rvci0yZjE0MDAyZC5icm93c2VyLmVzbS5qcyc7XG5pbXBvcnQgeyBhIGFzIENvbm5lY3Rvck5vdEZvdW5kRXJyb3IsIFUgYXMgVXNlclJlamVjdGVkUmVxdWVzdEVycm9yLCBSIGFzIFJlc291cmNlVW5hdmFpbGFibGVFcnJvciwgQyBhcyBDaGFpbk5vdENvbmZpZ3VyZWRFcnJvciwgQSBhcyBBZGRDaGFpbkVycm9yLCBTIGFzIFN3aXRjaENoYWluRXJyb3IgfSBmcm9tICcuLi8uLi8uLi8uLi9kaXN0L2Vycm9ycy1lYzRlNTNlOS5icm93c2VyLmVzbS5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldFZhbGlkUHVibGljUlBDVXJsIH0gZnJvbSAnLi4vLi4vLi4vLi4vZGlzdC91cmwtYmM4OGIyYjYuYnJvd3Nlci5lc20uanMnO1xuaW1wb3J0IHsgbiBhcyBub3JtYWxpemVDaGFpbklkIH0gZnJvbSAnLi4vLi4vLi4vLi4vZGlzdC9ub3JtYWxpemVDaGFpbklkLTFmYjlhZWRmLmJyb3dzZXIuZXNtLmpzJztcbmltcG9ydCAnQHRoaXJkd2ViLWRldi9jaGFpbnMnO1xuaW1wb3J0ICdldmVudGVtaXR0ZXIzJztcblxudmFyIF9wcm92aWRlciA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha01hcCgpO1xuY2xhc3MgRnJhbWVDb25uZWN0b3IgZXh0ZW5kcyBXYWdtaUNvbm5lY3RvciB7XG4gIGNvbnN0cnVjdG9yKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgY2hhaW5zLFxuICAgICAgb3B0aW9uczogc3VwcGxpZWRPcHRpb25zLFxuICAgICAgY29ubmVjdG9yU3RvcmFnZVxuICAgIH0gPSBfcmVmO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBzaGltRGlzY29ubmVjdDogdHJ1ZSxcbiAgICAgIC4uLnN1cHBsaWVkT3B0aW9uc1xuICAgIH07XG4gICAgc3VwZXIoe1xuICAgICAgY2hhaW5zLFxuICAgICAgb3B0aW9uc1xuICAgIH0pO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlkXCIsIFwiZnJhbWVcIik7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCBcIkZyYW1lXCIpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlYWR5XCIsIHRydWUpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNoaW1EaXNjb25uZWN0S2V5XCIsIGAke3RoaXMuaWR9LnNoaW1EaXNjb25uZWN0YCk7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWModGhpcywgX3Byb3ZpZGVyLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICB9KTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbkFjY291bnRzQ2hhbmdlZFwiLCBhY2NvdW50cyA9PiB7XG4gICAgICBpZiAoYWNjb3VudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuZW1pdChcImRpc2Nvbm5lY3RcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVtaXQoXCJjaGFuZ2VcIiwge1xuICAgICAgICAgIGFjY291bnQ6IHV0aWxzLmdldEFkZHJlc3MoYWNjb3VudHNbMF0pXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uQ2hhaW5DaGFuZ2VkXCIsIGNoYWluSWQgPT4ge1xuICAgICAgY29uc3QgaWQgPSBub3JtYWxpemVDaGFpbklkKGNoYWluSWQpO1xuICAgICAgY29uc3QgdW5zdXBwb3J0ZWQgPSB0aGlzLmlzQ2hhaW5VbnN1cHBvcnRlZChpZCk7XG4gICAgICB0aGlzLmVtaXQoXCJjaGFuZ2VcIiwge1xuICAgICAgICBjaGFpbjoge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHVuc3VwcG9ydGVkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRGlzY29ubmVjdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXQoXCJkaXNjb25uZWN0XCIpO1xuICAgICAgLy8gUmVtb3ZlIHNoaW0gc2lnbmFsbGluZyB3YWxsZXQgaXMgZGlzY29ubmVjdGVkXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnNoaW1EaXNjb25uZWN0KSB7XG4gICAgICAgIHRoaXMuY29ubmVjdG9yU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuc2hpbURpc2Nvbm5lY3RLZXkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuY29ubmVjdG9yU3RvcmFnZSA9IGNvbm5lY3RvclN0b3JhZ2U7XG4gIH1cbiAgYXN5bmMgY29ubmVjdChjb25maWcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvdmlkZXIgPSBhd2FpdCB0aGlzLmdldFByb3ZpZGVyKCk7XG4gICAgICBpZiAoIXByb3ZpZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBDb25uZWN0b3JOb3RGb3VuZEVycm9yKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnNldHVwTGlzdGVuZXJzKCk7XG4gICAgICB0aGlzLmVtaXQoXCJtZXNzYWdlXCIsIHtcbiAgICAgICAgdHlwZTogXCJjb25uZWN0aW5nXCJcbiAgICAgIH0pO1xuICAgICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCBwcm92aWRlci5yZXF1ZXN0KHtcbiAgICAgICAgbWV0aG9kOiBcImV0aF9yZXF1ZXN0QWNjb3VudHNcIlxuICAgICAgfSk7XG4gICAgICBjb25zdCBhY2NvdW50ID0gdXRpbHMuZ2V0QWRkcmVzcyhhY2NvdW50c1swXSk7XG4gICAgICAvLyBTd2l0Y2ggdG8gY2hhaW4gaWYgcHJvdmlkZWRcbiAgICAgIGxldCBpZCA9IGF3YWl0IHRoaXMuZ2V0Q2hhaW5JZCgpO1xuICAgICAgbGV0IHVuc3VwcG9ydGVkID0gdGhpcy5pc0NoYWluVW5zdXBwb3J0ZWQoaWQpO1xuICAgICAgaWYgKGNvbmZpZz8uY2hhaW5JZCAmJiBpZCAhPT0gY29uZmlnPy5jaGFpbklkKSB7XG4gICAgICAgIGNvbnN0IGNoYWluID0gYXdhaXQgdGhpcy5zd2l0Y2hDaGFpbihjb25maWc/LmNoYWluSWQpO1xuICAgICAgICBpZCA9IGNoYWluLmNoYWluSWQ7XG4gICAgICAgIHVuc3VwcG9ydGVkID0gdGhpcy5pc0NoYWluVW5zdXBwb3J0ZWQoaWQpO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgc2hpbSB0byBzdG9yYWdlIHNpZ25hbGxpbmcgd2FsbGV0IGlzIGNvbm5lY3RlZFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaGltRGlzY29ubmVjdCkge1xuICAgICAgICB0aGlzLmNvbm5lY3RvclN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnNoaW1EaXNjb25uZWN0S2V5LCBcInRydWVcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhY2NvdW50LFxuICAgICAgICBwcm92aWRlcixcbiAgICAgICAgY2hhaW46IHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICB1bnN1cHBvcnRlZFxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAodGhpcy5pc1VzZXJSZWplY3RlZFJlcXVlc3RFcnJvcihlcnJvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJSZWplY3RlZFJlcXVlc3RFcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gLTMyMDAyKSB7XG4gICAgICAgIHRocm93IG5ldyBSZXNvdXJjZVVuYXZhaWxhYmxlRXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4gIGFzeW5jIGRpc2Nvbm5lY3QoKSB7XG4gICAgY29uc3QgcHJvdmlkZXIgPSBhd2FpdCB0aGlzLmdldFByb3ZpZGVyKCk7XG4gICAgaWYgKCFwcm92aWRlcj8ucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcHJvdmlkZXIucmVtb3ZlTGlzdGVuZXIoXCJhY2NvdW50c0NoYW5nZWRcIiwgdGhpcy5vbkFjY291bnRzQ2hhbmdlZCk7XG4gICAgcHJvdmlkZXIucmVtb3ZlTGlzdGVuZXIoXCJjaGFpbkNoYW5nZWRcIiwgdGhpcy5vbkNoYWluQ2hhbmdlZCk7XG4gICAgcHJvdmlkZXIucmVtb3ZlTGlzdGVuZXIoXCJkaXNjb25uZWN0XCIsIHRoaXMub25EaXNjb25uZWN0KTtcbiAgICBpZiAoIXRoaXMuaXNJbmplY3RlZCgpKSB7XG4gICAgICBwcm92aWRlci5jbG9zZSgpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBzaGltIHNpZ25hbGxpbmcgd2FsbGV0IGlzIGRpc2Nvbm5lY3RlZFxuICAgIGlmICh0aGlzLm9wdGlvbnMuc2hpbURpc2Nvbm5lY3QpIHtcbiAgICAgIHRoaXMuY29ubmVjdG9yU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuc2hpbURpc2Nvbm5lY3RLZXkpO1xuICAgIH1cbiAgfVxuICBhc3luYyBnZXRBY2NvdW50KCkge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gYXdhaXQgdGhpcy5nZXRQcm92aWRlcigpO1xuICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBDb25uZWN0b3JOb3RGb3VuZEVycm9yKCk7XG4gICAgfVxuICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgcHJvdmlkZXIucmVxdWVzdCh7XG4gICAgICBtZXRob2Q6IFwiZXRoX2FjY291bnRzXCJcbiAgICB9KTtcbiAgICAvLyByZXR1cm4gY2hlY2tzdW0gYWRkcmVzc1xuICAgIHJldHVybiB1dGlscy5nZXRBZGRyZXNzKGFjY291bnRzWzBdKTtcbiAgfVxuICBhc3luYyBnZXRDaGFpbklkKCkge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gYXdhaXQgdGhpcy5nZXRQcm92aWRlcigpO1xuICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBDb25uZWN0b3JOb3RGb3VuZEVycm9yKCk7XG4gICAgfVxuICAgIGNvbnN0IGNoYWluSWQgPSBhd2FpdCBwcm92aWRlci5yZXF1ZXN0KHtcbiAgICAgIG1ldGhvZDogXCJldGhfY2hhaW5JZFwiXG4gICAgfSk7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZUNoYWluSWQoY2hhaW5JZCk7XG4gIH1cbiAgYXN5bmMgZ2V0UHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9wcm92aWRlciwgdGhpcy5pc0luamVjdGVkKCkgPyB0aGlzLmluamVjdGVkUHJvdmlkZXIoKSA6IGF3YWl0IHRoaXMuY3JlYXRlUHJvdmlkZXIoKSk7XG4gICAgcmV0dXJuIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfcHJvdmlkZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIGdldCBhIGBzaWduZXJgIGZvciBnaXZlbiBgY2hhaW5JZGBcbiAgICovXG4gIGFzeW5jIGdldFNpZ25lcigpIHtcbiAgICBsZXQge1xuICAgICAgY2hhaW5JZFxuICAgIH0gPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIGNvbnN0IFtwcm92aWRlciwgYWNjb3VudF0gPSBhd2FpdCBQcm9taXNlLmFsbChbdGhpcy5nZXRQcm92aWRlcigpLCB0aGlzLmdldEFjY291bnQoKV0pO1xuXG4gICAgLy8gZXRoZXJzLnByb3ZpZGVycy5XZWIzUHJvdmlkZXJcbiAgICByZXR1cm4gbmV3IHByb3ZpZGVycy5XZWIzUHJvdmlkZXIocHJvdmlkZXIsIGNoYWluSWQpLmdldFNpZ25lcihhY2NvdW50KTtcbiAgfVxuICBhc3luYyBpc0F1dGhvcml6ZWQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2hpbURpc2Nvbm5lY3QgJiZcbiAgICAgIC8vIElmIHNoaW0gZG9lcyBub3QgZXhpc3QgaW4gc3RvcmFnZSwgd2FsbGV0IGlzIGRpc2Nvbm5lY3RlZFxuICAgICAgIXRoaXMuY29ubmVjdG9yU3RvcmFnZS5nZXRJdGVtKHRoaXMuc2hpbURpc2Nvbm5lY3RLZXkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gYXdhaXQgdGhpcy5nZXRQcm92aWRlcigpO1xuICAgICAgaWYgKCFwcm92aWRlcikge1xuICAgICAgICB0aHJvdyBuZXcgQ29ubmVjdG9yTm90Rm91bmRFcnJvcigpO1xuICAgICAgfVxuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IHRoaXMuZ2V0QWNjb3VudCgpO1xuICAgICAgcmV0dXJuICEhYWNjb3VudDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgc3dpdGNoQ2hhaW4oY2hhaW5JZCkge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gYXdhaXQgdGhpcy5nZXRQcm92aWRlcigpO1xuICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBDb25uZWN0b3JOb3RGb3VuZEVycm9yKCk7XG4gICAgfVxuICAgIGNvbnN0IGNoYWluSWRIZXggPSB1dGlscy5oZXhWYWx1ZShjaGFpbklkKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW3Byb3ZpZGVyLnJlcXVlc3Qoe1xuICAgICAgICBtZXRob2Q6IFwid2FsbGV0X3N3aXRjaEV0aGVyZXVtQ2hhaW5cIixcbiAgICAgICAgcGFyYW1zOiBbe1xuICAgICAgICAgIGNoYWluSWQ6IGNoYWluSWRIZXhcbiAgICAgICAgfV1cbiAgICAgIH0pLCBuZXcgUHJvbWlzZShyZXMgPT4gdGhpcy5vbihcImNoYW5nZVwiLCBfcmVmMiA9PiB7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgY2hhaW5cbiAgICAgICAgfSA9IF9yZWYyO1xuICAgICAgICBpZiAoY2hhaW4/LmlkID09PSBjaGFpbklkKSB7XG4gICAgICAgICAgcmVzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pKV0pO1xuICAgICAgcmV0dXJuIHRoaXMuY2hhaW5zLmZpbmQoeCA9PiB4LmNoYWluSWQgPT09IGNoYWluSWQpID8/IHtcbiAgICAgICAgY2hhaW5JZDogY2hhaW5JZCxcbiAgICAgICAgbmFtZTogYENoYWluICR7Y2hhaW5JZEhleH1gLFxuICAgICAgICBzbHVnOiBgJHtjaGFpbklkSGV4fWAsXG4gICAgICAgIG5hdGl2ZUN1cnJlbmN5OiB7XG4gICAgICAgICAgbmFtZTogXCJFdGhlclwiLFxuICAgICAgICAgIGRlY2ltYWxzOiAxOCxcbiAgICAgICAgICBzeW1ib2w6IFwiRVRIXCJcbiAgICAgICAgfSxcbiAgICAgICAgcnBjOiBbXCJcIl0sXG4gICAgICAgIGNoYWluOiBcIlwiLFxuICAgICAgICBzaG9ydE5hbWU6IFwiXCIsXG4gICAgICAgIHRlc3RuZXQ6IHRydWVcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoc3dpdGNoQ2hhaW5FcnJvcikge1xuICAgICAgY29uc3QgY2hhaW4gPSB0aGlzLmNoYWlucy5maW5kKHggPT4geC5jaGFpbklkID09PSBjaGFpbklkKTtcbiAgICAgIGlmICghY2hhaW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IENoYWluTm90Q29uZmlndXJlZEVycm9yKHtcbiAgICAgICAgICBjaGFpbklkLFxuICAgICAgICAgIGNvbm5lY3RvcklkOiB0aGlzLmlkXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBJbmRpY2F0ZXMgY2hhaW4gaXMgbm90IGFkZGVkIHRvIHByb3ZpZGVyXG4gICAgICBpZiAoc3dpdGNoQ2hhaW5FcnJvci5jb2RlID09PSA0OTAyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgcHJvdmlkZXIucmVxdWVzdCh7XG4gICAgICAgICAgICBtZXRob2Q6IFwid2FsbGV0X2FkZEV0aGVyZXVtQ2hhaW5cIixcbiAgICAgICAgICAgIHBhcmFtczogW3tcbiAgICAgICAgICAgICAgY2hhaW5JZDogY2hhaW5JZEhleCxcbiAgICAgICAgICAgICAgY2hhaW5OYW1lOiBjaGFpbi5uYW1lLFxuICAgICAgICAgICAgICBuYXRpdmVDdXJyZW5jeTogY2hhaW4ubmF0aXZlQ3VycmVuY3ksXG4gICAgICAgICAgICAgIHJwY1VybHM6IGdldFZhbGlkUHVibGljUlBDVXJsKGNoYWluKSxcbiAgICAgICAgICAgICAgLy8gbm8gY2xpZW50IGlkIG9uIHB1cnBvc2UgaGVyZVxuICAgICAgICAgICAgICBibG9ja0V4cGxvcmVyVXJsczogdGhpcy5nZXRCbG9ja0V4cGxvcmVyVXJscyhjaGFpbilcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgY3VycmVudENoYWluSWQgPSBhd2FpdCB0aGlzLmdldENoYWluSWQoKTtcbiAgICAgICAgICBpZiAoY3VycmVudENoYWluSWQgIT09IGNoYWluSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyUmVqZWN0ZWRSZXF1ZXN0RXJyb3IobmV3IEVycm9yKFwiVXNlciByZWplY3RlZCBzd2l0Y2ggYWZ0ZXIgYWRkaW5nIG5ldHdvcmsuXCIpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNoYWluO1xuICAgICAgICB9IGNhdGNoIChhZGRDaGFpbkVycm9yKSB7XG4gICAgICAgICAgLy8gaWYgdXNlciByZWplY3RzIHJlcXVlc3QgdG8gYWRkIGNoYWluXG4gICAgICAgICAgaWYgKHRoaXMuaXNVc2VyUmVqZWN0ZWRSZXF1ZXN0RXJyb3IoYWRkQ2hhaW5FcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyUmVqZWN0ZWRSZXF1ZXN0RXJyb3IoYWRkQ2hhaW5FcnJvcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gZWxzZSBvdGhlciBlcnJvclxuICAgICAgICAgIHRocm93IG5ldyBBZGRDaGFpbkVycm9yKGFkZENoYWluRXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gaWYgdXNlciByZWplY3RzIHJlcXVlc3QgdG8gc3dpdGNoIGNoYWluXG4gICAgICBpZiAodGhpcy5pc1VzZXJSZWplY3RlZFJlcXVlc3RFcnJvcihzd2l0Y2hDaGFpbkVycm9yKSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlclJlamVjdGVkUmVxdWVzdEVycm9yKHN3aXRjaENoYWluRXJyb3IpO1xuICAgICAgfVxuXG4gICAgICAvLyBlbHNlIG90aGVyIGVycm9yXG4gICAgICB0aHJvdyBuZXcgU3dpdGNoQ2hhaW5FcnJvcihzd2l0Y2hDaGFpbkVycm9yKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgd2F0Y2hBc3NldChfcmVmMykge1xuICAgIGxldCB7XG4gICAgICBhZGRyZXNzLFxuICAgICAgZGVjaW1hbHMgPSAxOCxcbiAgICAgIGltYWdlLFxuICAgICAgc3ltYm9sXG4gICAgfSA9IF9yZWYzO1xuICAgIGNvbnN0IHByb3ZpZGVyID0gYXdhaXQgdGhpcy5nZXRQcm92aWRlcigpO1xuICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBDb25uZWN0b3JOb3RGb3VuZEVycm9yKCk7XG4gICAgfVxuICAgIHJldHVybiBwcm92aWRlci5yZXF1ZXN0KHtcbiAgICAgIG1ldGhvZDogXCJ3YWxsZXRfd2F0Y2hBc3NldFwiLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIHR5cGU6IFwiRVJDMjBcIixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGFkZHJlc3MsXG4gICAgICAgICAgZGVjaW1hbHMsXG4gICAgICAgICAgaW1hZ2UsXG4gICAgICAgICAgc3ltYm9sXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBhc3luYyBzZXR1cExpc3RlbmVycygpIHtcbiAgICBjb25zdCBwcm92aWRlciA9IGF3YWl0IHRoaXMuZ2V0UHJvdmlkZXIoKTtcbiAgICBpZiAocHJvdmlkZXIub24pIHtcbiAgICAgIHByb3ZpZGVyLm9uKFwiYWNjb3VudHNDaGFuZ2VkXCIsIHRoaXMub25BY2NvdW50c0NoYW5nZWQpO1xuICAgICAgcHJvdmlkZXIub24oXCJjaGFpbkNoYW5nZWRcIiwgdGhpcy5vbkNoYWluQ2hhbmdlZCk7XG4gICAgICBwcm92aWRlci5vbihcImRpc2Nvbm5lY3RcIiwgdGhpcy5vbkRpc2Nvbm5lY3QpO1xuICAgIH1cbiAgfVxuICBpc1VzZXJSZWplY3RlZFJlcXVlc3RFcnJvcihlcnJvcikge1xuICAgIHJldHVybiBlcnJvci5jb2RlID09PSA0MDAxO1xuICB9XG4gIGluamVjdGVkUHJvdmlkZXIoKSB7XG4gICAgcmV0dXJuIHdpbmRvdz8uZXRoZXJldW07XG4gIH1cbiAgaXNJbmplY3RlZCgpIHtcbiAgICByZXR1cm4gISF0aGlzLmluamVjdGVkUHJvdmlkZXIoKT8uaXNGcmFtZTtcbiAgfVxuICBhc3luYyBjcmVhdGVQcm92aWRlcigpIHtcbiAgICBjb25zdCBldGhQcm92aWRlciA9IChhd2FpdCBpbXBvcnQoJ2V0aC1wcm92aWRlcicpKS5kZWZhdWx0O1xuICAgIHJldHVybiBldGhQcm92aWRlcihcImZyYW1lXCIpO1xuICB9XG59XG5cbmV4cG9ydCB7IEZyYW1lQ29ubmVjdG9yIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@thirdweb-dev/wallets/evm/connectors/frame/dist/thirdweb-dev-wallets-evm-connectors-frame.browser.esm.js\n"));

/***/ })

}]);